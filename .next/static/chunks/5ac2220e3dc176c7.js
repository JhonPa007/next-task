(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4810,e=>{e.v({btnIcon:"Header-module__lnUIdW__btnIcon",btnText:"Header-module__lnUIdW__btnText",controls:"Header-module__lnUIdW__controls",header:"Header-module__lnUIdW__header",inviteBtn:"Header-module__lnUIdW__inviteBtn",title:"Header-module__lnUIdW__title"})},91157,e=>{e.v({closeBtn:"InviteModal-module__ectEUG__closeBtn",errorMsg:"InviteModal-module__ectEUG__errorMsg",form:"InviteModal-module__ectEUG__form",input:"InviteModal-module__ectEUG__input",message:"InviteModal-module__ectEUG__message",modalContent:"InviteModal-module__ectEUG__modalContent",modalDesc:"InviteModal-module__ectEUG__modalDesc",modalOverlay:"InviteModal-module__ectEUG__modalOverlay",modalTitle:"InviteModal-module__ectEUG__modalTitle",submitBtn:"InviteModal-module__ectEUG__submitBtn",successMsg:"InviteModal-module__ectEUG__successMsg"})},3374,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566),o=e.i(4810),i=e.i(95187);let l=(0,i.createServerReference)("6096ab7f90edfbad42d79925c9b912f741ade35bd0",i.callServer,void 0,i.findSourceMapURL,"inviteUserToWorkspace");var n=e.i(91157);function d({workspaceId:e,isOpen:t,onClose:o}){let[i,d]=(0,a.useState)(""),[s,c]=(0,a.useState)(null),[u,m]=(0,a.useTransition)();if(!t)return null;let v=async r=>{(r.preventDefault(),c(null),i.trim()&&i.includes("@"))?m(async()=>{let r=await l(e,i);r.error?c({type:"error",text:r.error}):(c({type:"success",text:r.message||"Miembro aÃ±adido."}),d(""),setTimeout(()=>{o(),c(null)},1500))}):c({type:"error",text:"Por favor, introduce un correo electrÃ³nico vÃ¡lido."})};return(0,r.jsx)("div",{className:n.default.modalOverlay,onClick:o,children:(0,r.jsxs)("div",{className:n.default.modalContent,onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{className:n.default.closeBtn,onClick:o,children:"Ã—"}),(0,r.jsx)("h3",{className:n.default.modalTitle,children:"Invitar al Workspace"}),(0,r.jsx)("p",{className:n.default.modalDesc,children:"Escribe el correo electrÃ³nico de tu colaborador. Si no tiene cuenta, le crearemos una temporal para que puedas asignarle tareas inmediatamente."}),(0,r.jsxs)("form",{onSubmit:v,className:n.default.form,children:[(0,r.jsx)("input",{type:"email",placeholder:"ejemplo@equipo.com",value:i,onChange:e=>d(e.target.value),className:n.default.input,disabled:u,autoFocus:!0}),s&&(0,r.jsx)("div",{className:`${n.default.message} ${"error"===s.type?n.default.errorMsg:n.default.successMsg}`,children:s.text}),(0,r.jsx)("button",{type:"submit",className:n.default.submitBtn,disabled:u,children:u?"Enviando...":"AÃ±adir Miembro"})]})]})})}var s=e.i(65150);function c({title:e}){let i=(0,t.useParams)().id,[l,n]=(0,a.useState)(!1),{theme:c,toggleTheme:u}=(0,s.useTheme)();return(0,r.jsxs)("header",{className:o.default.header,children:[(0,r.jsx)("div",{className:o.default.titleContainer,children:(0,r.jsx)("h1",{className:o.default.title,children:e})}),(0,r.jsxs)("div",{className:o.default.controls,children:[i&&(0,r.jsxs)("button",{className:o.default.inviteBtn,onClick:()=>n(!0),title:"Invitar miembro",children:["ðŸ‘¤ ",(0,r.jsx)("span",{className:o.default.btnText,children:"Invitar"})]}),(0,r.jsx)("button",{className:o.default.btnIcon,children:"Integraciones"}),(0,r.jsx)("button",{className:o.default.btnIcon,children:"Automatiza / 2"}),(0,r.jsx)("button",{className:o.default.btnIcon,onClick:u,title:"Cambiar Tema",style:{fontSize:"1.2rem",padding:"0 0.5rem"},children:"light"===c?"ðŸŒ™":"â˜€ï¸"})]}),i&&(0,r.jsx)(d,{workspaceId:i,isOpen:l,onClose:()=>n(!1)})]})}e.s(["default",()=>c],3374)},24360,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(95187);let o=(0,t.createServerReference)("7004c57e3771e3957e4d2263febfea3bf1a9290f75",t.callServer,void 0,t.findSourceMapURL,"createRoutine"),i=(0,t.createServerReference)("60205a99909b91ce00704033f37922d34d3c524e81",t.callServer,void 0,t.findSourceMapURL,"resolveRoutineWithEvidence"),l=(0,t.createServerReference)("40b1126e496512e6498de31856109ea07fa341f520",t.callServer,void 0,t.findSourceMapURL,"deleteRoutine");function n({initialRoutines:e}){let[t,n]=(0,a.useState)(e),[d,s]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,v]=(0,a.useState)(30),[p,x]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[g,h]=(0,a.useState)(""),y=async()=>{if(!d.trim())return;x(!0);let e=c?new Date(c):void 0,r=await o(d,m,e);r.success&&r.data?(n([r.data,...t]),s(""),u("")):alert("Error: "+r.error),x(!1)},_=async()=>{if(!b||!g.trim())return void alert("Evidencia es obligatoria.");x(!0);let e=await i(b,g);e.success&&e.data?(n(t.map(r=>r.id===b?e.data:r)),f(null),h("")):alert("Error: "+e.error),x(!1)},j=async e=>{if(!window.confirm("Â¿Eliminar esta rutina persistentemente?"))return;x(!0);let r=await l(e);r.success?n(t.filter(r=>r.id!==e)):alert("Error: "+r.error),x(!1)};return(0,r.jsxs)("div",{style:{marginBottom:"2rem",backgroundColor:"var(--surface)",padding:"1.5rem",borderRadius:"var(--radius-md)"},children:[(0,r.jsx)("h2",{style:{fontSize:"1.25rem",marginBottom:"1rem",color:"var(--danger)",display:"flex",alignItems:"center",gap:"0.5rem"},children:"â° Alarmas Cotidianas (Nagging Tasks)"}),(0,r.jsxs)("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"1rem"},children:["Estas tareas te enviarÃ¡n notificaciones Push ",(0,r.jsx)("b",{children:"cada ciertos minutos"})," de forma insistente hasta que subas la evidencia."]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Ej. Enviar Balance a Contabilidad",value:d,onChange:e=>s(e.target.value),style:{flex:1,minWidth:"200px",padding:"0.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-color)",backgroundColor:"var(--background)",color:"var(--text)"}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"0.65rem",color:"gray"},children:"Primer aviso (Opcional):"}),(0,r.jsx)("input",{type:"datetime-local",value:c,onChange:e=>u(e.target.value),style:{padding:"0.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-color)",backgroundColor:"var(--background)",color:"var(--text)"}})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"0.65rem",color:"gray"},children:"Frecuencia:"}),(0,r.jsxs)("select",{value:m,onChange:e=>v(Number(e.target.value)),style:{padding:"0.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-color)",backgroundColor:"var(--background)",color:"var(--text)"},children:[(0,r.jsx)("option",{value:15,children:"Insistir c/ 15 min"}),(0,r.jsx)("option",{value:30,children:"Insistir c/ 30 min"}),(0,r.jsx)("option",{value:60,children:"Insistir c/ 1 hora"}),(0,r.jsx)("option",{value:120,children:"Insistir c/ 2 horas"})]})]}),(0,r.jsx)("button",{onClick:y,disabled:p||!d.trim(),style:{padding:"0.5rem 1rem",alignSelf:"flex-end",borderRadius:"var(--radius-sm)",backgroundColor:"var(--primary)",color:"white",border:"none",cursor:"pointer",opacity:p?.7:1},children:p?"Creando...":"AÃ±adir Alarma"})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.map(e=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",border:"1px solid var(--border-color)",borderRadius:"var(--radius-sm)",backgroundColor:e.isCompleted?"var(--background)":"var(--surface)"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{style:{textDecoration:e.isCompleted?"line-through":"none",fontWeight:"bold"},children:e.title}),(0,r.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:e.isCompleted?(0,r.jsxs)("span",{style:{color:"var(--status-ready)"},children:["âœ… Evidencia: ",e.evidence]}):(0,r.jsxs)("span",{style:{color:"var(--danger)"},children:["ðŸš¨ PrÃ³ximo aviso: ",new Date(e.nextPingAt).toLocaleString()," (c/ ",e.intervalMinutes,"m)"]})})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[!e.isCompleted&&(0,r.jsx)("button",{onClick:()=>f(e.id),style:{padding:"0.4rem 0.8rem",backgroundColor:"var(--status-ready)",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:"Subir Evidencia"}),(0,r.jsx)("button",{onClick:()=>j(e.id),style:{padding:"0.4rem 0.8rem",color:"gray",border:"1px solid var(--border-color)",background:"transparent",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"ðŸ—‘ï¸"})]})]},e.id)),0===t.length&&(0,r.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"No hay alarmas activas."})]}),b&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,r.jsxs)("div",{style:{backgroundColor:"var(--surface)",padding:"2rem",borderRadius:"var(--radius-md)",width:"400px",maxWidth:"90%"},children:[(0,r.jsx)("h3",{style:{marginBottom:"1rem"},children:"Sube tu Evidencia Obligatoria"}),(0,r.jsx)("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"1rem"},children:"Pega aquÃ­ el enlace de Drive, OneDrive, foto o texto confirmando que la tarea realmente se hizo."}),(0,r.jsx)("textarea",{value:g,onChange:e=>h(e.target.value),placeholder:"Ej: https://docs.google.com/... o 'Ya lo mandÃ© por correo'",style:{width:"100%",height:"80px",padding:"0.5rem",marginBottom:"1rem",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)",borderRadius:"4px"}}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[(0,r.jsx)("button",{onClick:()=>f(null),style:{padding:"0.5rem 1rem",background:"transparent",color:"var(--text)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:"Cancelar"}),(0,r.jsx)("button",{onClick:_,disabled:p||!g.trim(),style:{padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",opacity:!g.trim()||p?.5:1},children:p?"Guardando...":"Confirmar & Silenciar"})]})]})})]})}e.s(["default",()=>n],24360)}]);