(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36199,e=>{e.v({addCol:"TableView-module__u6Pjnq__addCol",assigneeSelect:"TableView-module__u6Pjnq__assigneeSelect",avatar:"TableView-module__u6Pjnq__avatar",columns:"TableView-module__u6Pjnq__columns",container:"TableView-module__u6Pjnq__container",dateInput:"TableView-module__u6Pjnq__dateInput",deleteBtn:"TableView-module__u6Pjnq__deleteBtn",dueDate:"TableView-module__u6Pjnq__dueDate",editableInput:"TableView-module__u6Pjnq__editableInput",expandIcon:"TableView-module__u6Pjnq__expandIcon",group:"TableView-module__u6Pjnq__group",groupHeader:"TableView-module__u6Pjnq__groupHeader",groupTitle:"TableView-module__u6Pjnq__groupTitle",indicator:"TableView-module__u6Pjnq__indicator",newTaskInput:"TableView-module__u6Pjnq__newTaskInput",owner:"TableView-module__u6Pjnq__owner",priority:"TableView-module__u6Pjnq__priority",progressCounter:"TableView-module__u6Pjnq__progressCounter",rowExpandBtn:"TableView-module__u6Pjnq__rowExpandBtn",status:"TableView-module__u6Pjnq__status",taskList:"TableView-module__u6Pjnq__taskList",taskRow:"TableView-module__u6Pjnq__taskRow",taskTitle:"TableView-module__u6Pjnq__taskTitle",timeline:"TableView-module__u6Pjnq__timeline"})},57012,e=>{e.v({checkbox:"SubtaskList-module__D3Sumq__checkbox",completed:"SubtaskList-module__D3Sumq__completed",deleteBtn:"SubtaskList-module__D3Sumq__deleteBtn",iconHolder:"SubtaskList-module__D3Sumq__iconHolder",newInput:"SubtaskList-module__D3Sumq__newInput",newSubtaskRow:"SubtaskList-module__D3Sumq__newSubtaskRow",subtaskContainer:"SubtaskList-module__D3Sumq__subtaskContainer",subtaskInput:"SubtaskList-module__D3Sumq__subtaskInput",subtaskItem:"SubtaskList-module__D3Sumq__subtaskItem",subtaskList:"SubtaskList-module__D3Sumq__subtaskList"})},85960,e=>{e.v({assigneeAvatar:"BoardView-module__QxD3iq__assigneeAvatar",boardContainer:"BoardView-module__QxD3iq__boardContainer",boardScroll:"BoardView-module__QxD3iq__boardScroll",boardTitle:"BoardView-module__QxD3iq__boardTitle",card:"BoardView-module__QxD3iq__card",cardActions:"BoardView-module__QxD3iq__cardActions",cardFooter:"BoardView-module__QxD3iq__cardFooter",cardHeader:"BoardView-module__QxD3iq__cardHeader",cardTitle:"BoardView-module__QxD3iq__cardTitle",column:"BoardView-module__QxD3iq__column",columnBody:"BoardView-module__QxD3iq__columnBody",columnHeader:"BoardView-module__QxD3iq__columnHeader",columnsWrapper:"BoardView-module__QxD3iq__columnsWrapper",comments:"BoardView-module__QxD3iq__comments",dragOver:"BoardView-module__QxD3iq__dragOver",dragging:"BoardView-module__QxD3iq__dragging",iconBtn:"BoardView-module__QxD3iq__iconBtn",priorityBadge:"BoardView-module__QxD3iq__priorityBadge",subtaskBadge:"BoardView-module__QxD3iq__subtaskBadge"})},69274,e=>{e.v({btn:"CalendarView-module__qaIh9G__btn",btnIcon:"CalendarView-module__qaIh9G__btnIcon",calendarContainer:"CalendarView-module__qaIh9G__calendarContainer",controls:"CalendarView-module__qaIh9G__controls",dayCell:"CalendarView-module__qaIh9G__dayCell",dayName:"CalendarView-module__qaIh9G__dayName",dayNumber:"CalendarView-module__qaIh9G__dayNumber",emptyCell:"CalendarView-module__qaIh9G__emptyCell",grid:"CalendarView-module__qaIh9G__grid",header:"CalendarView-module__qaIh9G__header",monthTitle:"CalendarView-module__qaIh9G__monthTitle",pillText:"CalendarView-module__qaIh9G__pillText",taskPill:"CalendarView-module__qaIh9G__taskPill",tasksWrapper:"CalendarView-module__qaIh9G__tasksWrapper",today:"CalendarView-module__qaIh9G__today"})},7781,e=>{e.v({barProgressText:"GanttView-module__6fNYJq__barProgressText",dayHeader:"GanttView-module__6fNYJq__dayHeader",ganttBar:"GanttView-module__6fNYJq__ganttBar",ganttBody:"GanttView-module__6fNYJq__ganttBody",ganttContainer:"GanttView-module__6fNYJq__ganttContainer",ganttHeader:"GanttView-module__6fNYJq__ganttHeader",ganttRow:"GanttView-module__6fNYJq__ganttRow",ganttScrollable:"GanttView-module__6fNYJq__ganttScrollable",taskLabel:"GanttView-module__6fNYJq__taskLabel",taskLabelHeader:"GanttView-module__6fNYJq__taskLabelHeader",timelineHeader:"GanttView-module__6fNYJq__timelineHeader",timelineRow:"GanttView-module__6fNYJq__timelineRow",todayHeader:"GanttView-module__6fNYJq__todayHeader",todayLine:"GanttView-module__6fNYJq__todayLine"})},15479,e=>{e.v({avatar:"WorkloadView-module__-aKbHG__avatar",body:"WorkloadView-module__-aKbHG__body",bubble:"WorkloadView-module__-aKbHG__bubble",cell:"WorkloadView-module__-aKbHG__cell",dayHeader:"WorkloadView-module__-aKbHG__dayHeader",dayNum:"WorkloadView-module__-aKbHG__dayNum",dayWeek:"WorkloadView-module__-aKbHG__dayWeek",dot:"WorkloadView-module__-aKbHG__dot",headerRow:"WorkloadView-module__-aKbHG__headerRow",legend:"WorkloadView-module__-aKbHG__legend",legendItem:"WorkloadView-module__-aKbHG__legendItem",memberHeader:"WorkloadView-module__-aKbHG__memberHeader",memberInfo:"WorkloadView-module__-aKbHG__memberInfo",memberName:"WorkloadView-module__-aKbHG__memberName",memberRow:"WorkloadView-module__-aKbHG__memberRow",timelineHeader:"WorkloadView-module__-aKbHG__timelineHeader",timelineRow:"WorkloadView-module__-aKbHG__timelineRow",today:"WorkloadView-module__-aKbHG__today",weekend:"WorkloadView-module__-aKbHG__weekend",weekendCell:"WorkloadView-module__-aKbHG__weekendCell",workloadContainer:"WorkloadView-module__-aKbHG__workloadContainer",workloadScrollable:"WorkloadView-module__-aKbHG__workloadScrollable"})},36404,e=>{e.v({active:"TaskManager-module__k8wXda__active",taskManager:"TaskManager-module__k8wXda__taskManager",toggleBtn:"TaskManager-module__k8wXda__toggleBtn",toolbar:"TaskManager-module__k8wXda__toolbar",viewToggles:"TaskManager-module__k8wXda__viewToggles"})},28434,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(36199),r=e.i(57012),s=e.i(95187);let d=(0,s.createServerReference)("70500d97c2d7f0e7b72e77e2e1e7b5b25f14d7a318",s.callServer,void 0,s.findSourceMapURL,"createSubtask"),i=(0,s.createServerReference)("703b43e061b6b2c4c223531da33bdd9e3a78bf8d78",s.callServer,void 0,s.findSourceMapURL,"toggleSubtaskCompletion"),n=(0,s.createServerReference)("70e52966c822f12fd1da39158aa024ac88fdf29978",s.callServer,void 0,s.findSourceMapURL,"updateSubtaskTitle"),o=(0,s.createServerReference)("60ea9fefb3f836063012818b5b33c92d9d5d1f057b",s.callServer,void 0,s.findSourceMapURL,"deleteSubtask");function u({taskId:e,workspaceId:l,subtasks:s,onSubtasksChange:u}){let[c,m]=(0,t.useState)(""),[_,g]=(0,t.useTransition)(),b=async a=>{"Enter"===a.key&&c.trim()&&(m(""),u(e,[...s,{id:`temp-${Date.now()}`,title:c,isCompleted:!1}]),g(async()=>{try{let a=await d(e,l,c);u(e,[...s,a])}catch(a){console.error("Error creating subtask",a),u(e,s)}}))};return(0,a.jsxs)("div",{className:r.default.subtaskContainer,children:[(0,a.jsx)("div",{className:r.default.subtaskList,children:s.map(t=>(0,a.jsxs)("div",{className:`${r.default.subtaskItem} ${t.isCompleted?r.default.completed:""}`,children:[(0,a.jsx)("input",{type:"checkbox",className:r.default.checkbox,checked:t.isCompleted,onChange:()=>{let a;return a=!t.isCompleted,void(u(e,s.map(e=>e.id===t.id?{...e,isCompleted:a}:e)),g(async()=>{try{t.id.startsWith("temp")||await i(t.id,l,a)}catch(a){console.error(a),u(e,s)}}))}}),(0,a.jsx)("input",{type:"text",className:r.default.subtaskInput,defaultValue:t.title,onBlur:a=>{var r,d;return r=t.id,void(t.title===(d=a.target.value)||!d.trim()||(u(e,s.map(e=>e.id===r?{...e,title:d}:e)),g(async()=>{try{r.startsWith("temp")||await n(r,l,d)}catch(a){console.error(a),u(e,s)}})))}}),(0,a.jsx)("button",{className:r.default.deleteBtn,onClick:()=>{var a;return a=t.id,void(u(e,s.filter(e=>e.id!==a)),g(async()=>{try{a.startsWith("temp")||await o(a,l)}catch(a){console.error(a),u(e,s)}}))},children:"âœ•"})]},t.id))}),(0,a.jsxs)("div",{className:r.default.newSubtaskRow,children:[(0,a.jsx)("div",{className:r.default.iconHolder}),(0,a.jsx)("input",{type:"text",placeholder:"AÃ±adir subtarea (Enter)",className:r.default.newInput,value:c,onChange:e=>m(e.target.value),onKeyDown:b})]})]})}let c=(0,s.createServerReference)("783c79de5d0e9727cc38378205233af563f8f2ffd0",s.callServer,void 0,s.findSourceMapURL,"createCheckIn"),m=(0,s.createServerReference)("40edc25db179ad1a463eb0478d28429bca3250d665",s.callServer,void 0,s.findSourceMapURL,"getTaskCheckIns");function _({taskId:e,onClose:l}){let[r,s]=(0,t.useState)([]),[d,i]=(0,t.useState)(!1),[n,o]=(0,t.useState)(!1),[u,_]=(0,t.useState)(!0);(0,t.useEffect)(()=>{o(!0),(async()=>{_(!0);let a=await m(e);a.success&&a.data&&s(a.data),_(!1)})()},[e]);let[g,b]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[h,x]=(0,t.useState)("NORMAL"),[v,w]=(0,t.useState)(!1),k=async()=>{if(!g.trim())return;w(!0);let a=await c(e,g,f.trim()||null,h);a.success&&a.data?(s([{id:a.data.id,accomplishments:a.data.accomplishments,blockers:a.data.blockers,morale:a.data.morale,createdAt:a.data.createdAt,user:{name:"Yo",email:""}},...r]),i(!1),b(""),p(""),x("NORMAL")):alert("Error: "+a.error),w(!1)};return(0,a.jsxs)("div",{style:{backgroundColor:"var(--surface)",padding:"1.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",position:"relative"},children:[l&&(0,a.jsx)("button",{onClick:l,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",color:"var(--text)",cursor:"pointer",fontSize:"1.2rem"},children:"âœ•"}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",marginTop:l?"1rem":"0"},children:[(0,a.jsx)("h2",{style:{fontSize:"1.25rem",color:"var(--foreground)"},children:"Log de Progreso (Tarea)"}),(0,a.jsx)("button",{onClick:()=>i(!0),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-sm)",backgroundColor:"var(--primary)",color:"white",border:"none",cursor:"pointer",fontWeight:"bold"},children:"ðŸ“ AÃ±adir Reporte"})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.map(e=>{var t;return(0,a.jsxs)("div",{style:{padding:"1rem",backgroundColor:"var(--background)",borderRadius:"var(--radius-sm)",borderLeft:`4px solid ${"ESTRESADO"===e.morale?"var(--danger)":"EXCELENTE"===e.morale?"var(--status-ready)":"gray"}`},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.8rem"},children:[(0,a.jsx)("strong",{style:{color:"var(--primary)"},children:e.user.name||e.user.email}),(0,a.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:n?new Date(e.createdAt).toLocaleDateString():""})]}),(0,a.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[(0,a.jsx)("strong",{children:"âœ… Logros: "})," ",(0,a.jsx)("span",{style:{color:"var(--text)"},children:e.accomplishments})]}),e.blockers&&(0,a.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[(0,a.jsx)("strong",{children:"ðŸš§ Bloqueos: "})," ",(0,a.jsx)("span",{style:{color:"var(--text)"},children:e.blockers})]}),(0,a.jsxs)("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",color:"var(--text-muted)"},children:["MotivaciÃ³n: ","EXCELENTE"===(t=e.morale)?"ðŸ¤© Excelente":"ESTRESADO"===t?"ðŸ¥µ Estresado":"ðŸ™‚ Normal"]})]},e.id)}),u&&0===r.length&&(0,a.jsx)("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"Cargando historial..."}),!u&&0===r.length&&(0,a.jsx)("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"AÃºn no hay reportes de progreso en esta tarea."})]}),d&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,a.jsxs)("div",{style:{backgroundColor:"var(--surface)",padding:"2rem",borderRadius:"var(--radius-md)",width:"500px",maxWidth:"90%"},children:[(0,a.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Escribe tu Check-In"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿QuÃ© lograste avanzar hoy/esta semana? *"}),(0,a.jsx)("textarea",{value:g,onChange:e=>b(e.target.value),style:{width:"100%",height:"80px",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿Hay algo bloqueando tu trabajo? (Opcional)"}),(0,a.jsx)("textarea",{value:f,onChange:e=>p(e.target.value),placeholder:"ObstÃ¡culos, falta de recursos...",style:{width:"100%",height:"60px",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿CuÃ¡l es tu estado de Ã¡nimo?"}),(0,a.jsxs)("select",{value:h,onChange:e=>x(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"},children:[(0,a.jsx)("option",{value:"EXCELENTE",children:"ðŸ¤© Excelente, muy motivado"}),(0,a.jsx)("option",{value:"NORMAL",children:"ðŸ™‚ Bien, normal"}),(0,a.jsx)("option",{value:"ESTRESADO",children:"ðŸ¥µ Estresado o frustrado"})]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[(0,a.jsx)("button",{onClick:()=>i(!1),style:{padding:"0.5rem 1rem",background:"transparent",color:"var(--text)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:"Cancelar"}),(0,a.jsx)("button",{onClick:k,disabled:v||!g.trim(),style:{padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:v?"Enviando...":"Enviar Reporte"})]})]})})]})}function g({tasks:e,members:r,onCreateTask:s,onUpdateTask:d,onDeleteTask:i}){let[n,o]=(0,t.useState)(""),[c,m]=(0,t.useState)({}),[g,b]=(0,t.useState)(null),f=e=>{if(!e)return"";let a=new Date(e);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]};return(0,a.jsxs)("div",{className:l.default.container,children:[(0,a.jsxs)("div",{className:l.default.group,children:[(0,a.jsxs)("div",{className:l.default.groupHeader,children:[(0,a.jsxs)("div",{className:l.default.groupTitle,style:{color:"var(--primary)"},children:[(0,a.jsx)("span",{className:l.default.expandIcon,children:"â–¼"})," Tareas del Proyecto"]}),(0,a.jsxs)("div",{className:l.default.columns,children:[(0,a.jsx)("span",{children:"DueÃ±o"}),(0,a.jsx)("span",{children:"Estado"}),(0,a.jsx)("span",{children:"Cronograma"}),(0,a.jsx)("span",{children:"Prioridad"}),(0,a.jsx)("span",{children:"+"})]})]}),(0,a.jsxs)("div",{className:l.default.taskList,children:[e.map(e=>{let s=!!c[e.id],n=e.subtasks?.length||0,o=e.subtasks?.filter(e=>e.isCompleted).length||0;return(0,a.jsxs)(t.default.Fragment,{children:[(0,a.jsxs)("div",{className:l.default.taskRow,children:[(0,a.jsx)("div",{className:l.default.indicator,style:{backgroundColor:"var(--primary)"}}),(0,a.jsxs)("div",{className:l.default.taskTitle,children:[(0,a.jsx)("button",{onClick:()=>{var a;return a=e.id,void m(e=>({...e,[a]:!e[a]}))},className:l.default.rowExpandBtn,title:s?"Colapsar subtareas":"Expandir subtareas",children:s?"â–¼":"â–¶"}),(0,a.jsx)("input",{type:"text",defaultValue:e.title,onBlur:a=>{a.target.value!==e.title&&d(e.id,{title:a.target.value})},className:l.default.editableInput}),n>0&&(0,a.jsxs)("span",{className:l.default.progressCounter,title:"Subtareas completadas",children:[o,"/",n]})]}),(0,a.jsx)("div",{className:l.default.owner,children:(0,a.jsxs)("select",{className:l.default.assigneeSelect,value:e.assignees?.[0]?.user?.id||"",onChange:a=>d(e.id,{assigneeId:a.target.value||null}),children:[(0,a.jsx)("option",{value:"",children:"Sin Asignar"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name||e.email},e.id))]})}),(0,a.jsx)("div",{className:l.default.status,style:{backgroundColor:(e=>{switch(e){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--status-default)"}})(e.status)},onClick:()=>{let a="TODO"===e.status?"IN_PROGRESS":"IN_PROGRESS"===e.status?"DONE":"DONE"===e.status?"STUCK":"TODO";d(e.id,{status:a})},title:"Click para cambiar",children:(e=>{switch(e){case"DONE":return"Listo";case"IN_PROGRESS":return"En curso";case"STUCK":return"Detenido";default:return"Por Hacer"}})(e.status)}),(0,a.jsxs)("div",{className:l.default.timeline,children:[(0,a.jsx)("input",{type:"date",className:l.default.dateInput,defaultValue:f(e.startDate),onChange:a=>d(e.id,{startDate:a.target.value?new Date(a.target.value):null}),title:"Fecha de inicio"}),(0,a.jsx)("span",{children:"-"}),(0,a.jsx)("input",{type:"date",className:l.default.dateInput,defaultValue:f(e.dueDate),onChange:a=>d(e.id,{dueDate:a.target.value?new Date(a.target.value):null}),title:"Fecha de entrega"})]}),(0,a.jsx)("div",{className:l.default.priority,style:{backgroundColor:(e=>{switch(e){case"URGENT":return"var(--status-stuck)";case"HIGH":return"var(--status-working)";case"MEDIUM":return"var(--status-blue)";default:return"var(--status-default)"}})(e.priority)},onClick:()=>{let a="LOW"===e.priority?"MEDIUM":"MEDIUM"===e.priority?"HIGH":"HIGH"===e.priority?"URGENT":"LOW";d(e.id,{priority:a})},title:"Click para cambiar",children:(e=>{switch(e){case"URGENT":return"CrÃ­tica";case"HIGH":return"Alta";case"MEDIUM":return"Media";default:return"Baja"}})(e.priority)}),(0,a.jsxs)("div",{className:l.default.addCol,children:[(0,a.jsx)("button",{onClick:()=>b(e.id),className:l.default.deleteBtn,title:"Reporte de Progreso",children:"ðŸ“"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:l.default.deleteBtn,children:"ðŸ—‘ï¸"})]})]}),s&&(0,a.jsx)(u,{taskId:e.id,workspaceId:e.workspaces?.[0]?.workspaceId||"",subtasks:e.subtasks||[],onSubtasksChange:(a,t)=>{let l={subtasks:t};if(t.length>0){let a=t.filter(e=>e.isCompleted).length;a===t.length&&"DONE"!==e.status?l.status="DONE":a>0&&a<t.length&&"TODO"===e.status?l.status="IN_PROGRESS":0===a&&"DONE"===e.status&&(l.status="TODO")}d(a,l)}})]},e.id)}),(0,a.jsxs)("div",{className:l.default.taskRow,children:[(0,a.jsx)("div",{className:l.default.indicator,style:{backgroundColor:"transparent"}}),(0,a.jsx)("div",{className:l.default.taskTitle,children:(0,a.jsx)("input",{type:"text",placeholder:"+ AÃ±adir tarea (Enter para guardar)",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n.trim()&&(s(n,"MEDIUM"),o(""))},className:l.default.newTaskInput})}),(0,a.jsx)("div",{className:l.default.owner}),(0,a.jsx)("div",{className:l.default.status}),(0,a.jsx)("div",{className:l.default.timeline}),(0,a.jsx)("div",{className:l.default.priority}),(0,a.jsx)("div",{className:l.default.addCol})]})]})]}),g&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,a.jsx)("div",{style:{width:"600px",maxWidth:"90%",maxHeight:"90vh",overflowY:"auto"},children:(0,a.jsx)(_,{taskId:g,onClose:()=>b(null)})})})]})}var b=e.i(85960);function f({tasks:e,onUpdateTask:l,onDeleteTask:r}){let[s,d]=(0,t.useState)(null),[i,n]=(0,t.useState)(null),[o,u]=(0,t.useState)(null),c=()=>{n(null)};return(0,a.jsxs)("div",{className:b.default.boardContainer,children:[(0,a.jsx)("h2",{className:b.default.boardTitle,children:"Tablero de Tareas"}),(0,a.jsx)("div",{className:b.default.boardScroll,children:(0,a.jsx)("div",{className:b.default.columnsWrapper,children:[{id:"TODO",label:"Por Hacer",color:"var(--status-default)"},{id:"IN_PROGRESS",label:"En Curso",color:"var(--status-working)"},{id:"DONE",label:"Listo",color:"var(--status-ready)"},{id:"STUCK",label:"Detenido",color:"var(--status-stuck)"}].map(t=>{let o=e.filter(e=>e.status===t.id);return(0,a.jsxs)("div",{className:`${b.default.column} ${i===t.id?b.default.dragOver:""}`,onDragOver:e=>{var a;return a=t.id,void(e.preventDefault(),e.dataTransfer.dropEffect="move",i!==a&&n(a))},onDragLeave:c,onDrop:a=>((a,t)=>{a.preventDefault(),n(null);let r=a.dataTransfer.getData("text/plain");if(r&&s===r){let a=e.find(e=>e.id===r);a&&a.status!==t&&l(r,{status:t})}d(null)})(a,t.id),children:[(0,a.jsxs)("div",{className:b.default.columnHeader,style:{backgroundColor:t.color},children:[t.label," / ",o.length]}),(0,a.jsx)("div",{className:b.default.columnBody,children:o.map(e=>{let t=e.subtasks||[],l=t.filter(e=>e.isCompleted).length,i=t.length>0,n=e.assignees?.[0]?.user;return(0,a.jsxs)("div",{className:`${b.default.card} ${s===e.id?b.default.dragging:""}`,draggable:!0,onDragStart:a=>{var t;d(t=e.id),a.dataTransfer.setData("text/plain",t),a.dataTransfer.effectAllowed="move"},children:[(0,a.jsxs)("div",{className:b.default.cardHeader,children:["LOW"!==e.priority&&(0,a.jsx)("span",{className:b.default.priorityBadge,children:"URGENT"===e.priority?"ðŸ”¥ðŸ”¥ðŸ”¥":"HIGH"===e.priority?"â­â­â­":"â­â­"}),n&&(0,a.jsx)("span",{className:b.default.assigneeAvatar,title:n.name||n.email,children:n.name?n.name.charAt(0).toUpperCase():"ðŸ‘¤"})]}),(0,a.jsx)("div",{className:b.default.cardTitle,children:e.title}),(0,a.jsxs)("div",{className:b.default.cardFooter,children:[i?(0,a.jsxs)("div",{className:b.default.subtaskBadge,title:"Subtareas completadas",children:[(0,a.jsx)("span",{children:"ðŸ“‹"})," ",l,"/",t.length]}):(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:b.default.cardActions,children:[(0,a.jsx)("button",{onClick:()=>u(e.id),className:b.default.iconBtn,title:"Reportes de Progreso",children:"ðŸ“"}),(0,a.jsx)("button",{onClick:()=>r(e.id),className:b.default.iconBtn,title:"Borrar Tarea",children:"ðŸ—‘ï¸"})]})]})]},e.id)})})]},t.id)})})}),o&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,a.jsx)("div",{style:{width:"600px",maxWidth:"90%",maxHeight:"90vh",overflowY:"auto"},children:(0,a.jsx)(_,{taskId:o,onClose:()=>u(null)})})})]})}var p=e.i(69274);function h({tasks:e,onUpdateTask:l}){let[r,s]=(0,t.useState)(new Date),d=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),i=new Date(r.getFullYear(),r.getMonth(),1).getDay(),n=(()=>{let e=[];for(let a=0;a<i;a++)e.push(null);for(let a=1;a<=d;a++)e.push(a);return e})();return(0,a.jsxs)("div",{className:p.default.calendarContainer,children:[(0,a.jsxs)("div",{className:p.default.header,children:[(0,a.jsxs)("div",{className:p.default.monthTitle,children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][r.getMonth()]," ",r.getFullYear()]}),(0,a.jsxs)("div",{className:p.default.controls,children:[(0,a.jsx)("button",{onClick:()=>{s(new Date)},className:p.default.btn,children:"Hoy"}),(0,a.jsx)("button",{onClick:()=>{s(new Date(r.getFullYear(),r.getMonth()-1,1))},className:p.default.btnIcon,children:"<"}),(0,a.jsx)("button",{onClick:()=>{s(new Date(r.getFullYear(),r.getMonth()+1,1))},className:p.default.btnIcon,children:">"})]})]}),(0,a.jsxs)("div",{className:p.default.grid,children:[["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"].map(e=>(0,a.jsx)("div",{className:p.default.dayName,children:e},e)),n.map((t,l)=>{let s=(a=>{if(!a)return[];let t=new Date(r.getFullYear(),r.getMonth(),a).toISOString().split("T")[0];return e.filter(e=>!!e.dueDate&&(e.dueDate instanceof Date?e.dueDate.toISOString().split("T")[0]:new Date(e.dueDate).toISOString().split("T")[0])===t)})(t);return(0,a.jsxs)("div",{className:`${p.default.dayCell} ${t?"":p.default.emptyCell} ${(e=>{if(!e)return!1;let a=new Date;return e===a.getDate()&&r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear()})(t)?p.default.today:""}`,children:[(0,a.jsx)("div",{className:p.default.dayNumber,children:t}),(0,a.jsx)("div",{className:p.default.tasksWrapper,children:s.map(e=>(0,a.jsx)("div",{className:p.default.taskPill,style:{borderLeftColor:(e=>{switch(e){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--status-default)"}})(e.status)},title:e.title,children:(0,a.jsx)("span",{className:p.default.pillText,children:e.title})},e.id))})]},l)})]})]})}var x=e.i(7781);function v({tasks:e}){let l=new Date;l.setHours(0,0,0,0);let r=new Date(l);r.setDate(l.getDate()-15);let s=(0,t.useMemo)(()=>{let e=[];for(let a=0;a<60;a++){let t=new Date(r);t.setDate(r.getDate()+a),e.push(t)}return e},[r]),d=e.filter(e=>e.startDate&&e.dueDate).sort((e,a)=>new Date(e.startDate).getTime()-new Date(a.startDate).getTime());return(0,a.jsx)("div",{className:x.default.ganttContainer,children:(0,a.jsxs)("div",{className:x.default.ganttScrollable,children:[(0,a.jsxs)("div",{className:x.default.ganttHeader,children:[(0,a.jsx)("div",{className:x.default.taskLabelHeader,children:"Tarea"}),(0,a.jsx)("div",{className:x.default.timelineHeader,children:s.map((e,t)=>{let r=e.getTime()===l.getTime();return(0,a.jsxs)("div",{className:`${x.default.dayHeader} ${r?x.default.todayHeader:""}`,children:[(0,a.jsx)("span",{children:e.getDate()}),(0,a.jsx)("span",{style:{fontSize:"0.65rem",opacity:.7},children:e.toLocaleDateString("es",{weekday:"short"})})]},t)})})]}),(0,a.jsxs)("div",{className:x.default.ganttBody,children:[(0,a.jsx)("div",{className:x.default.todayLine,style:{left:"calc(250px + 600px + 20px)"}}),0===d.length?(0,a.jsx)("div",{style:{padding:"2rem",color:"#888"},children:"No hay tareas con fechas de inicio y fin asignadas para mostrar en el diagrama de Gantt."}):d.map(e=>{let t=new Date(e.startDate);t.setHours(0,0,0,0);let l=new Date(e.dueDate);l.setHours(0,0,0,0);let s=Math.floor((t.getTime()-r.getTime())/864e5),d=Math.max(1,Math.floor((l.getTime()-t.getTime())/864e5)+1);return(0,a.jsxs)("div",{className:x.default.ganttRow,children:[(0,a.jsx)("div",{className:x.default.taskLabel,title:e.title,children:e.title}),(0,a.jsx)("div",{className:x.default.timelineRow,children:s>=0&&s<60&&(0,a.jsx)("div",{className:x.default.ganttBar,style:{left:`${40*s}px`,width:`${40*d-4}px`,backgroundColor:(e=>{switch(e){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--primary)"}})(e.status)},title:`${e.title} (${t.toLocaleDateString()} - ${l.toLocaleDateString()})`,children:(0,a.jsx)("span",{className:x.default.barProgressText,children:"DONE"===e.status?"100%":""})})})]},e.id)})]})]})})}var w=e.i(15479);function k({tasks:e,members:l}){let r=new Date;r.setHours(0,0,0,0);let s=new Date(r);s.setDate(r.getDate()-r.getDay()-7);let d=(0,t.useMemo)(()=>{let e=[];for(let a=0;a<28;a++){let t=new Date(s);t.setDate(s.getDate()+a),e.push(t)}return e},[s]),i=[...l.map(e=>({id:e.id,name:e.name||e.email,isUnassigned:!1})),{id:"unassigned",name:"Sin Asignar",isUnassigned:!0}];return(0,a.jsxs)("div",{className:w.default.workloadContainer,children:[(0,a.jsxs)("div",{className:w.default.workloadScrollable,children:[(0,a.jsxs)("div",{className:w.default.headerRow,children:[(0,a.jsx)("div",{className:w.default.memberHeader,children:"Miembro del Equipo"}),(0,a.jsx)("div",{className:w.default.timelineHeader,children:d.map((e,t)=>{let l=e.getTime()===r.getTime(),s=0===e.getDay()||6===e.getDay();return(0,a.jsxs)("div",{className:`${w.default.dayHeader} ${l?w.default.today:""} ${s?w.default.weekend:""}`,children:[(0,a.jsx)("span",{className:w.default.dayNum,children:e.getDate()}),(0,a.jsx)("span",{className:w.default.dayWeek,children:e.toLocaleDateString("es",{weekday:"short"})})]},t)})})]}),(0,a.jsx)("div",{className:w.default.body,children:i.map(t=>(0,a.jsxs)("div",{className:w.default.memberRow,children:[(0,a.jsxs)("div",{className:w.default.memberInfo,children:[(0,a.jsx)("div",{className:w.default.avatar,children:t.isUnassigned?"?":t.name.charAt(0).toUpperCase()}),(0,a.jsx)("span",{className:w.default.memberName,children:t.name})]}),(0,a.jsx)("div",{className:w.default.timelineRow,children:d.map((l,r)=>{var s;let d=0,i=[];e.forEach(e=>{(t.isUnassigned?!e.assignees||0===e.assignees.length:e.assignees?.some(e=>e.user.id===t.id))&&"DONE"!==e.status&&((e,a)=>{if(!e.startDate||!e.dueDate)return!1;let t=new Date(e.startDate);t.setHours(0,0,0,0);let l=new Date(e.dueDate);return l.setHours(23,59,59,999),a>=t&&a<=l})(e,l)&&(d++,i.push(e.title))});let n=0===(s=d)?"transparent":1===s?"var(--primary)":2===s?"#f59e0b":"#ef4444",o=0===l.getDay()||6===l.getDay();return(0,a.jsx)("div",{className:`${w.default.cell} ${o?w.default.weekendCell:""}`,children:d>0&&(0,a.jsx)("div",{className:w.default.bubble,style:{backgroundColor:n},title:i.join("\n"),children:d})},r)})})]},t.id))})]}),(0,a.jsxs)("div",{className:w.default.legend,children:[(0,a.jsx)("span",{children:(0,a.jsx)("strong",{children:"Leyenda (Tareas activas por dÃ­a):"})}),(0,a.jsxs)("span",{className:w.default.legendItem,children:[(0,a.jsx)("span",{className:w.default.dot,style:{background:"var(--primary)"}})," 1 Tarea (Ã“ptimo)"]}),(0,a.jsxs)("span",{className:w.default.legendItem,children:[(0,a.jsx)("span",{className:w.default.dot,style:{background:"#f59e0b"}})," 2 Tareas (Alerta)"]}),(0,a.jsxs)("span",{className:w.default.legendItem,children:[(0,a.jsx)("span",{className:w.default.dot,style:{background:"#ef4444"}})," 3+ Tareas (Sobrecarga)"]})]})]})}let j=(0,s.createServerReference)("407c884cd690c207052838e8d0242021627178afb5",s.callServer,void 0,s.findSourceMapURL,"createTask"),y=(0,s.createServerReference)("70142ce74a16d569fe4b550b1eb58754160cf80109",s.callServer,void 0,s.findSourceMapURL,"updateTask"),N=(0,s.createServerReference)("60d6016544db5b9c94c5eecf4c552dbe5884ae49fd",s.callServer,void 0,s.findSourceMapURL,"deleteTask");var D=e.i(36404);function S({initialTasks:e,workspaceId:l,members:r,customCreateTask:s,customUpdateTask:d,customDeleteTask:i,initialCheckIns:n}){let[o,u]=(0,t.useState)("table"),[c,m]=(0,t.useState)(e),[_,b]=(0,t.useTransition)();(0,t.useEffect)(()=>{m(e)},[e]);let p=async(e,a="MEDIUM")=>{if(!e.trim())return;let t={id:`temp-${Date.now()}`,title:e,status:"TODO",priority:a,dueDate:null,assignees:[]};m(e=>[t,...e]),b(async()=>{try{s?await s(e,a):l&&await j({workspaceId:l,title:e,priority:a})}catch(e){console.error(e),m(e=>e.filter(e=>e.id!==t.id))}})},x=async(e,a)=>{m(t=>t.map(t=>{if(t.id===e){let e={...t,...a};if(void 0!==a.assigneeId)if(a.assigneeId){let t=r.find(e=>e.id===a.assigneeId);e.assignees=[{user:{id:a.assigneeId,name:t?.name,email:t?.email}}]}else e.assignees=[];return e}return t})),b(async()=>{try{d?await d(e,a):l&&await y(e,l,a)}catch(e){console.error("Failed to update task",e)}})},w=async e=>{confirm("Â¿Seguro que quieres borrar esta tarea?")&&(m(a=>a.filter(a=>a.id!==e)),b(async()=>{try{i?await i(e):l&&await N(e,l)}catch(e){console.error("Failed to delete task",e)}}))};return(0,a.jsxs)("div",{className:D.default.taskManager,children:[(0,a.jsx)("div",{className:D.default.toolbar,children:(0,a.jsxs)("div",{className:D.default.viewToggles,children:[(0,a.jsx)("button",{className:`${D.default.toggleBtn} ${"table"===o?D.default.active:""}`,onClick:()=>u("table"),children:"Tabla"}),(0,a.jsx)("button",{className:`${D.default.toggleBtn} ${"kanban"===o?D.default.active:""}`,onClick:()=>u("kanban"),children:"Kanban"}),(0,a.jsx)("button",{className:`${D.default.toggleBtn} ${"calendar"===o?D.default.active:""}`,onClick:()=>u("calendar"),children:"Calendario"}),(0,a.jsx)("button",{className:`${D.default.toggleBtn} ${"gantt"===o?D.default.active:""}`,onClick:()=>u("gantt"),children:"Gantt"}),(0,a.jsx)("button",{className:`${D.default.toggleBtn} ${"workload"===o?D.default.active:""}`,onClick:()=>u("workload"),children:"Carga de Trabajo"})]})}),"table"===o&&(0,a.jsx)(g,{tasks:c,members:r,onCreateTask:p,onUpdateTask:x,onDeleteTask:w}),"kanban"===o&&(0,a.jsx)(f,{tasks:c,onUpdateTask:x,onDeleteTask:w}),"calendar"===o&&(0,a.jsx)(h,{tasks:c,onUpdateTask:x}),"gantt"===o&&(0,a.jsx)(v,{tasks:c}),"workload"===o&&(0,a.jsx)(k,{tasks:c,members:r})]})}e.s(["default",()=>S],28434)}]);