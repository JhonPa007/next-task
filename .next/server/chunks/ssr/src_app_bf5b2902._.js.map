{"version":3,"sources":["turbopack:///[project]/src/app/login/auth.module.css [app-ssr] (css module)","../../../../src/app/register/page.tsx","../../../../src/app/actions/data%3A489aea%20%3Ctext/javascript%3E"],"sourcesContent":["__turbopack_context__.v({\n  \"card\": \"auth-module__ozYyRa__card\",\n  \"container\": \"auth-module__ozYyRa__container\",\n  \"error\": \"auth-module__ozYyRa__error\",\n  \"footer\": \"auth-module__ozYyRa__footer\",\n  \"form\": \"auth-module__ozYyRa__form\",\n  \"input\": \"auth-module__ozYyRa__input\",\n  \"inputGroup\": \"auth-module__ozYyRa__inputGroup\",\n  \"label\": \"auth-module__ozYyRa__label\",\n  \"link\": \"auth-module__ozYyRa__link\",\n  \"submitBtn\": \"auth-module__ozYyRa__submitBtn\",\n  \"subtitle\": \"auth-module__ozYyRa__subtitle\",\n  \"title\": \"auth-module__ozYyRa__title\",\n});\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { registerUser } from '@/app/actions/user';\r\nimport { signIn } from 'next-auth/react';\r\nimport styles from '../login/auth.module.css'; // Reusamos los estilos de login\r\n\r\nexport default function RegisterPage() {\r\n    const router = useRouter();\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            // 1. Registrar usuario en la base de datos a través del Server Action\r\n            const result = await registerUser(email, password, name);\r\n\r\n            if (!result.success) {\r\n                setError(result.message);\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            // 2. Autologuear al usuario si el registro fue exitoso\r\n            const signInRes = await signIn('credentials', {\r\n                redirect: false,\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (signInRes?.error) {\r\n                setError('Cuenta creada, pero hubo un error ingresando. Intenta iniciar sesión manualmente.');\r\n                setIsLoading(false);\r\n            } else {\r\n                // Hard redirect\r\n                window.location.href = '/';\r\n            }\r\n\r\n        } catch (err: any) {\r\n            setError('Error de conectividad. Intenta de nuevo.');\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className={styles.container}>\r\n            <div className={styles.card}>\r\n                <h1 className={styles.title}>NextTask</h1>\r\n                <p className={styles.subtitle}>Crea tu cuenta de colaborador para empezar.</p>\r\n\r\n                {error && <div className={styles.error}>{error}</div>}\r\n\r\n                <form onSubmit={handleSubmit} className={styles.form}>\r\n                    <div className={styles.inputGroup}>\r\n                        <label className={styles.label} htmlFor=\"name\">Nombre Completo</label>\r\n                        <input\r\n                            id=\"name\"\r\n                            type=\"text\"\r\n                            className={styles.input}\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            placeholder=\"Ej. Juan Pérez\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className={styles.inputGroup}>\r\n                        <label className={styles.label} htmlFor=\"email\">Correo Electrónico</label>\r\n                        <input\r\n                            id=\"email\"\r\n                            type=\"email\"\r\n                            className={styles.input}\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            placeholder=\"nombre@empresa.com\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className={styles.inputGroup}>\r\n                        <label className={styles.label} htmlFor=\"password\">Contraseña Segura</label>\r\n                        <input\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            className={styles.input}\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            placeholder=\"••••••••\"\r\n                            minLength={6}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <button type=\"submit\" className={styles.submitBtn} disabled={isLoading}>\r\n                        {isLoading ? 'Registrando...' : 'Crear Cuenta'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div className={styles.footer}>\r\n                    ¿Ya tienes una cuenta? <Link href=\"/login\" className={styles.link}>Inicia Sesión aquí</Link>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"70169935428d39f6a5198b3c84e3b133703d9dd938\":\"registerUser\"},\"src/app/actions/user.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"70169935428d39f6a5198b3c84e3b133703d9dd938\",callServer,void 0,findSourceMapURL,\"registerUser\");export{$$RSC_SERVER_ACTION_1 as registerUser};"],"names":[],"mappings":"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"}