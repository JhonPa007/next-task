module.exports=[25041,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(94431),e=a.i(9307),f=a.i(72849);async function g(){try{let a=await (0,d.getServerSession)(e.authOptions);if(!a?.user?.email)return null;return await c.prisma.user.findUnique({where:{email:a.user.email}})}catch(a){return console.error("Error fetching current user session:",a),null}}async function h(a,b,d){try{if(!a||!b)return{success:!1,message:"El correo y la contraseña son obligatorios."};if(await c.prisma.user.findUnique({where:{email:a}}))return{success:!1,message:"Ya existe una cuenta con este correo."};let e=await f.default.hash(b,10);return await c.prisma.user.create({data:{email:a,name:d||a.split("@")[0],password:e}}),{success:!0,message:"Usuario creado exitosamente."}}catch(a){return console.error("Error registrando usuario:",a),{success:!1,message:a.message||"Error desconocido creando el usuario."}}}(0,a.i(13095).ensureServerEntryExports)([g,h]),(0,b.registerServerReference)(g,"00c5ec6a839333a2e817476cb0fa4602de37ccb213",null),(0,b.registerServerReference)(h,"70169935428d39f6a5198b3c84e3b133703d9dd938",null),a.s(["getCurrentUser",()=>g,"registerUser",()=>h])},49719,(a,b,c)=>{b.exports=a.x("assert",()=>require("assert"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},45706,(a,b,c)=>{b.exports=a.x("querystring",()=>require("querystring"))},6461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},78295,a=>{a.v({name:"openid-client",version:"5.7.1",description:"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs",keywords:["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],homepage:"https://github.com/panva/openid-client",repository:"panva/openid-client",funding:{url:"https://github.com/sponsors/panva"},license:"MIT",author:"Filip Skokan <panva.ip@gmail.com>",exports:{types:"./types/index.d.ts",import:"./lib/index.mjs",require:"./lib/index.js"},main:"./lib/index.js",types:"./types/index.d.ts",files:["lib","types/index.d.ts"],scripts:{format:"npx prettier --loglevel silent --write ./lib ./test ./certification ./types",test:"mocha test/**/*.test.js"},dependencies:{jose:"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},devDependencies:{"@types/node":"^16.18.106","@types/passport":"^1.0.16",base64url:"^3.0.1",chai:"^4.5.0",mocha:"^10.7.3",nock:"^13.5.5",prettier:"^2.8.8","readable-mock-req":"^0.2.2",sinon:"^9.2.4",timekeeper:"^2.3.1"},"standard-version":{scripts:{postchangelog:"sed -i '' -e 's/### \\[/## [/g' CHANGELOG.md"},types:[{type:"feat",section:"Features"},{type:"fix",section:"Fixes"},{type:"chore",hidden:!0},{type:"docs",hidden:!0},{type:"style",hidden:!0},{type:"refactor",section:"Refactor",hidden:!1},{type:"perf",section:"Performance",hidden:!1},{type:"test",hidden:!0}]}})},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},4446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},55004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},70722,(a,b,c)=>{b.exports=a.x("tty",()=>require("tty"))},31726,a=>{"use strict";var b=a.i(37936),c=a.i(66518);async function d(a){try{if(!a){let a=await c.prisma.chatSession.findFirst({where:{workspaceId:null}});if(a)return a;return await c.prisma.chatSession.create({data:{}})}let b=await c.prisma.chatSession.findFirst({where:{workspaceId:a}});return b||(b=await c.prisma.chatSession.create({data:{workspaceId:a}})),b}catch(a){throw console.error("Error getting/creating chat session:",a),Error("No se pudo obtener la sesión de chat")}}async function e(a){try{return await c.prisma.chatMessage.findMany({where:{chatSessionId:a},orderBy:{createdAt:"asc"}})}catch(a){return console.error("Error fetching chat history:",a),[]}}async function f(a,b,d){try{return await c.prisma.chatMessage.create({data:{chatSessionId:a,role:b,text:d}})}catch(a){throw console.error("Error saving chat message:",a),Error("No se pudo guardar el mensaje")}}async function g(a){try{return await c.prisma.chatMessage.deleteMany({where:{chatSessionId:a}}),!0}catch(a){throw console.error("Error clearing chat history:",a),Error("No se pudo limpiar el historial")}}(0,a.i(13095).ensureServerEntryExports)([d,e,f,g]),(0,b.registerServerReference)(d,"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3",null),(0,b.registerServerReference)(e,"40723cc56224262f28b87c25b6b494ea62369a007e",null),(0,b.registerServerReference)(f,"70c1e2bf18f4cf7756e213c8903f9022c6990c9745",null),(0,b.registerServerReference)(g,"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30",null),a.s(["clearChatHistory",()=>g,"getChatHistory",()=>e,"getOrCreateChatSession",()=>d])},31186,a=>{"use strict";var b=a.i(39615),c=a.i(44306),d=a.i(31726),e=a.i(25041);a.s([],78505),a.i(78505),a.s(["007df99478876faf1be0a9287652a497a9c330c5be",()=>b.getWorkspaces,"00c5ec6a839333a2e817476cb0fa4602de37ccb213",()=>e.getCurrentUser,"40211ca8d3d05ab60a741dbbfd1c44d01ba208ee63",()=>b.joinWorkspace,"4057b6b122a1d227d93b4421561d1064d3daa794c6",()=>b.createWorkspace,"405e0d830509c8d72682aaa3f5bf299d1a2d884845",()=>c.savePushSubscription,"40723cc56224262f28b87c25b6b494ea62369a007e",()=>d.getChatHistory,"4079e265df772b313e9fb1f8ed53ccc6c2f1755d2f",()=>b.deleteWorkspace,"40808c801d7bd5372c066b27d49f0dbf04a5e56f80",()=>b.getWorkspaceMembers,"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30",()=>d.clearChatHistory,"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3",()=>d.getOrCreateChatSession,"6096ab7f90edfbad42d79925c9b912f741ade35bd0",()=>b.inviteUserToWorkspace,"60aaccbf2e1157c6c321521724da79b6083afd2a63",()=>b.updateWorkspace,"70169935428d39f6a5198b3c84e3b133703d9dd938",()=>e.registerUser],31186)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__554511e5._.js.map