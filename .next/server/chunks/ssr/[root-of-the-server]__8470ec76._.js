module.exports=[49719,(a,b,c)=>{b.exports=a.x("assert",()=>require("assert"))},70722,(a,b,c)=>{b.exports=a.x("tty",()=>require("tty"))},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},4446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},55004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},25041,a=>{"use strict";var b=a.i(37936),c=a.i(66518);async function d(){try{let a=await c.prisma.user.findFirst();return a||(a=await c.prisma.user.create({data:{email:"admin@nexttask.com",name:"Admin User"}})),a}catch(a){return console.error("Error fetching current user:",a),null}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"00c5ec6a839333a2e817476cb0fa4602de37ccb213",null),a.s(["getCurrentUser",()=>d])},31726,a=>{"use strict";var b=a.i(37936),c=a.i(66518);async function d(a){try{if(!a){let a=await c.prisma.chatSession.findFirst({where:{workspaceId:null}});if(a)return a;return await c.prisma.chatSession.create({data:{}})}let b=await c.prisma.chatSession.findFirst({where:{workspaceId:a}});return b||(b=await c.prisma.chatSession.create({data:{workspaceId:a}})),b}catch(a){throw console.error("Error getting/creating chat session:",a),Error("No se pudo obtener la sesiÃ³n de chat")}}async function e(a){try{return await c.prisma.chatMessage.findMany({where:{chatSessionId:a},orderBy:{createdAt:"asc"}})}catch(a){return console.error("Error fetching chat history:",a),[]}}async function f(a,b,d){try{return await c.prisma.chatMessage.create({data:{chatSessionId:a,role:b,text:d}})}catch(a){throw console.error("Error saving chat message:",a),Error("No se pudo guardar el mensaje")}}async function g(a){try{return await c.prisma.chatMessage.deleteMany({where:{chatSessionId:a}}),!0}catch(a){throw console.error("Error clearing chat history:",a),Error("No se pudo limpiar el historial")}}(0,a.i(13095).ensureServerEntryExports)([d,e,f,g]),(0,b.registerServerReference)(d,"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3",null),(0,b.registerServerReference)(e,"40723cc56224262f28b87c25b6b494ea62369a007e",null),(0,b.registerServerReference)(f,"70c1e2bf18f4cf7756e213c8903f9022c6990c9745",null),(0,b.registerServerReference)(g,"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30",null),a.s(["clearChatHistory",()=>g,"getChatHistory",()=>e,"getOrCreateChatSession",()=>d])},31350,a=>{"use strict";var b=a.i(39615),c=a.i(44306),d=a.i(31726),e=a.i(25041);a.s([],32211),a.i(32211),a.s(["007df99478876faf1be0a9287652a497a9c330c5be",()=>b.getWorkspaces,"00c5ec6a839333a2e817476cb0fa4602de37ccb213",()=>e.getCurrentUser,"4057b6b122a1d227d93b4421561d1064d3daa794c6",()=>b.createWorkspace,"405e0d830509c8d72682aaa3f5bf299d1a2d884845",()=>c.savePushSubscription,"40723cc56224262f28b87c25b6b494ea62369a007e",()=>d.getChatHistory,"4079e265df772b313e9fb1f8ed53ccc6c2f1755d2f",()=>b.deleteWorkspace,"40808c801d7bd5372c066b27d49f0dbf04a5e56f80",()=>b.getWorkspaceMembers,"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30",()=>d.clearChatHistory,"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3",()=>d.getOrCreateChatSession,"6096ab7f90edfbad42d79925c9b912f741ade35bd0",()=>b.inviteUserToWorkspace,"60aaccbf2e1157c6c321521724da79b6083afd2a63",()=>b.updateWorkspace],31350)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8470ec76._.js.map