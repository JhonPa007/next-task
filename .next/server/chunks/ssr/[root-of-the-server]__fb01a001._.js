module.exports=[49719,(a,b,c)=>{b.exports=a.x("assert",()=>require("assert"))},70722,(a,b,c)=>{b.exports=a.x("tty",()=>require("tty"))},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},4446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},55004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},25041,a=>{"use strict";var b=a.i(37936),c=a.i(66518);async function d(){try{let a=await c.prisma.user.findFirst();return a||(a=await c.prisma.user.create({data:{email:"admin@nexttask.com",name:"Admin User"}})),a}catch(a){return console.error("Error fetching current user:",a),null}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"00c5ec6a839333a2e817476cb0fa4602de37ccb213",null),a.s(["getCurrentUser",()=>d])},31726,a=>{"use strict";var b=a.i(37936),c=a.i(66518);async function d(a){try{if(!a){let a=await c.prisma.chatSession.findFirst({where:{workspaceId:null}});if(a)return a;return await c.prisma.chatSession.create({data:{}})}let b=await c.prisma.chatSession.findFirst({where:{workspaceId:a}});return b||(b=await c.prisma.chatSession.create({data:{workspaceId:a}})),b}catch(a){throw console.error("Error getting/creating chat session:",a),Error("No se pudo obtener la sesiÃ³n de chat")}}async function e(a){try{return await c.prisma.chatMessage.findMany({where:{chatSessionId:a},orderBy:{createdAt:"asc"}})}catch(a){return console.error("Error fetching chat history:",a),[]}}async function f(a,b,d){try{return await c.prisma.chatMessage.create({data:{chatSessionId:a,role:b,text:d}})}catch(a){throw console.error("Error saving chat message:",a),Error("No se pudo guardar el mensaje")}}async function g(a){try{return await c.prisma.chatMessage.deleteMany({where:{chatSessionId:a}}),!0}catch(a){throw console.error("Error clearing chat history:",a),Error("No se pudo limpiar el historial")}}(0,a.i(13095).ensureServerEntryExports)([d,e,f,g]),(0,b.registerServerReference)(d,"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3",null),(0,b.registerServerReference)(e,"40723cc56224262f28b87c25b6b494ea62369a007e",null),(0,b.registerServerReference)(f,"70c1e2bf18f4cf7756e213c8903f9022c6990c9745",null),(0,b.registerServerReference)(g,"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30",null),a.s(["clearChatHistory",()=>g,"getChatHistory",()=>e,"getOrCreateChatSession",()=>d])},24855,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);async function e(a){try{return(await c.prisma.taskWorkspace.findMany({where:{workspaceId:a},include:{task:{include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}}}},orderBy:{task:{createdAt:"desc"}}})).map(a=>a.task)}catch(a){return console.error("Error fetching tasks by workspace:",a),[]}}async function f(a){try{let b=await c.prisma.task.create({data:{title:a.title,status:a.status||"TODO",priority:a.priority||"MEDIUM",startDate:a.startDate,dueDate:a.dueDate,workspaces:{create:{workspaceId:a.workspaceId}}}});return(0,d.revalidatePath)(`/workspace/${a.workspaceId}`),await c.prisma.task.findUnique({where:{id:b.id},include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}}})}catch(a){throw console.error("Error creating task:",a),Error("No se pudo crear la tarea")}}async function g(a,b,e){try{let f={...e},g=f.assigneeId;delete f.assigneeId,delete f.subtasks,void 0!==g&&(await c.prisma.taskAssignee.deleteMany({where:{taskId:a}}),null!==g&&(f.assignees={create:{userId:g}}));let h=await c.prisma.task.update({where:{id:a},data:f,include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}}});return(0,d.revalidatePath)(`/workspace/${b}`),h}catch(a){throw console.error("Error updating task:",a),Error("No se pudo actualizar la tarea")}}async function h(a,b){try{return await c.prisma.task.delete({where:{id:a}}),(0,d.revalidatePath)(`/workspace/${b}`),{success:!0}}catch(a){throw console.error("Error deleting task:",a),Error("No se pudo eliminar la tarea")}}async function i(a){try{return await c.prisma.task.findMany({where:{assignees:{some:{userId:a}}},include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}},orderBy:{createdAt:"desc"}})}catch(a){return console.error("Error fetching personal tasks:",a),[]}}async function j(a,b){try{let e=await c.prisma.task.create({data:{title:b.title,status:b.status||"TODO",priority:b.priority||"MEDIUM",startDate:b.startDate,dueDate:b.dueDate,assignees:{create:{userId:a}}},include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}}});return(0,d.revalidatePath)("/my-tasks"),e}catch(a){throw console.error("Error creating personal task:",a),Error("No se pudo crear la tarea personal")}}async function k(a,b){try{let e={...b};delete e.subtasks;let f=await c.prisma.task.update({where:{id:a},data:e,include:{assignees:{include:{user:!0}},subtasks:{orderBy:{createdAt:"asc"}}}});return(0,d.revalidatePath)("/my-tasks"),f}catch(a){throw console.error("Error updating personal task:",a),Error("No se pudo actualizar la tarea personal")}}async function l(a){try{return await c.prisma.task.delete({where:{id:a}}),(0,d.revalidatePath)("/my-tasks"),{success:!0}}catch(a){throw console.error("Error deleting personal task:",a),Error("No se pudo eliminar la tarea personal")}}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h,i,j,k,l]),(0,b.registerServerReference)(e,"4019160971a8fa0681d4784ca509d16072ae1829a0",null),(0,b.registerServerReference)(f,"407c884cd690c207052838e8d0242021627178afb5",null),(0,b.registerServerReference)(g,"70142ce74a16d569fe4b550b1eb58754160cf80109",null),(0,b.registerServerReference)(h,"60d6016544db5b9c94c5eecf4c552dbe5884ae49fd",null),(0,b.registerServerReference)(i,"400faa740f4acd7e632ba1bfce7f7facd71ad4b584",null),(0,b.registerServerReference)(j,"603bc7d3f39f3681a0af4d69828f12f2ca9d51c31f",null),(0,b.registerServerReference)(k,"60e9e067aa6023b0dcc3b96ca0846570695dc12149",null),(0,b.registerServerReference)(l,"405b131769c067e782e027890a39b6ceb80a4e74be",null),a.s(["createPersonalTask",()=>j,"createTask",()=>f,"deletePersonalTask",()=>l,"deleteTask",()=>h,"getPersonalTasks",()=>i,"getTasksByWorkspace",()=>e,"updatePersonalTask",()=>k,"updateTask",()=>g])},29216,3995,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(13095);async function f(a,b,e){try{let f=await c.prisma.subtask.create({data:{taskId:a,title:e,isCompleted:!1}});return(0,d.revalidatePath)(`/workspace/${b}`),f}catch(a){throw console.error("Error creating subtask:",a),Error("No se pudo crear la subtarea")}}async function g(a,b,e){try{let f=await c.prisma.subtask.update({where:{id:a},data:{isCompleted:e}});return(0,d.revalidatePath)(`/workspace/${b}`),f}catch(a){throw console.error("Error toggling subtask:",a),Error("No se pudo actualizar la subtarea")}}async function h(a,b,e){try{let f=await c.prisma.subtask.update({where:{id:a},data:{title:e}});return(0,d.revalidatePath)(`/workspace/${b}`),f}catch(a){throw console.error("Error updating subtask title:",a),Error("No se pudo actualizar el tÃ­tulo de la subtarea")}}async function i(a,b){try{return await c.prisma.subtask.delete({where:{id:a}}),(0,d.revalidatePath)(`/workspace/${b}`),{success:!0}}catch(a){throw console.error("Error deleting subtask:",a),Error("No se pudo eliminar la subtarea")}}(0,e.ensureServerEntryExports)([f,g,h,i]),(0,b.registerServerReference)(f,"70500d97c2d7f0e7b72e77e2e1e7b5b25f14d7a318",null),(0,b.registerServerReference)(g,"703b43e061b6b2c4c223531da33bdd9e3a78bf8d78",null),(0,b.registerServerReference)(h,"70e52966c822f12fd1da39158aa024ac88fdf29978",null),(0,b.registerServerReference)(i,"60ea9fefb3f836063012818b5b33c92d9d5d1f057b",null),a.s(["createSubtask",()=>f,"deleteSubtask",()=>i,"toggleSubtaskCompletion",()=>g,"updateSubtaskTitle",()=>h],29216);var j=a.i(25041);async function k(a,b,d,e){try{let f=await (0,j.getCurrentUser)();if(!f)return{success:!1,error:"Unauthorized"};if(!b||""===b.trim())return{success:!1,error:"Se requieren ingresar al menos los logros."};let g=await c.prisma.checkIn.create({data:{accomplishments:b,blockers:d,morale:e,task:{connect:{id:a}},user:{connect:{id:f.id}}}});return{success:!0,data:g}}catch(a){return console.error("Error creating checkin:",a),{success:!1,error:a.message}}}async function l(a){try{if(!await (0,j.getCurrentUser)())return{success:!1,error:"Unauthorized"};let b=await c.prisma.checkIn.findMany({where:{taskId:a},include:{user:{select:{name:!0,email:!0}}},orderBy:{createdAt:"desc"},take:30});return{success:!0,data:b}}catch(a){return console.error("Error in getWorkspaceCheckIns:",a),{success:!1,error:a.message}}}(0,e.ensureServerEntryExports)([k,l]),(0,b.registerServerReference)(k,"783c79de5d0e9727cc38378205233af563f8f2ffd0",null),(0,b.registerServerReference)(l,"40edc25db179ad1a463eb0478d28429bca3250d665",null),a.s(["createCheckIn",()=>k,"getTaskCheckIns",()=>l],3995)},54081,231,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(13095);async function f(a){try{return await c.prisma.goal.findMany({where:{workspaceId:a},include:{keyResults:!0},orderBy:{createdAt:"desc"}})}catch(a){return console.error("Error fetching goals:",a),[]}}async function g(a){try{let b=await c.prisma.goal.create({data:{workspaceId:a.workspaceId,title:a.title,type:a.type||"QUALITATIVE",status:"ON_TRACK"}});return(0,d.revalidatePath)(`/workspace/${a.workspaceId}`),b}catch(a){throw console.error("Error creating goal:",a),Error("No se pudo crear el objetivo")}}async function h(a){try{let b=await c.prisma.keyResult.create({data:{goalId:a.goalId,title:a.title,targetValue:a.targetValue,unit:a.unit,currentValue:0}});return(0,d.revalidatePath)("/"),b}catch(a){throw console.error("Error creating KR:",a),Error("No se pudo crear el key result")}}async function i(a,b,e){try{let f=await c.prisma.goal.update({where:{id:a},data:{title:b}});return(0,d.revalidatePath)(`/workspace/${e}`),f}catch(a){throw console.error("Error updating goal:",a),Error("No se pudo actualizar el objetivo")}}async function j(a,b){try{return await c.prisma.goal.delete({where:{id:a}}),(0,d.revalidatePath)(`/workspace/${b}`),!0}catch(a){throw console.error("Error deleting goal:",a),Error("No se pudo eliminar el objetivo")}}async function k(a,b){try{let e=await c.prisma.keyResult.update({where:{id:a},data:b});return(0,d.revalidatePath)("/"),e}catch(a){throw console.error("Error updating key result:",a),Error("No se pudo actualizar el resultado clave")}}async function l(a){try{return await c.prisma.keyResult.delete({where:{id:a}}),(0,d.revalidatePath)("/"),!0}catch(a){throw console.error("Error deleting key result:",a),Error("No se pudo eliminar el resultado clave")}}(0,e.ensureServerEntryExports)([f,g,h,i,j,k,l]),(0,b.registerServerReference)(f,"40c143fc817b3e44e0ea6af485d0699bed1aeb6a7f",null),(0,b.registerServerReference)(g,"4097f9de6c40be3eaa287e3437342330730fd77ff3",null),(0,b.registerServerReference)(h,"401dd3764060b74ea3d3f6aa8055ab32fe2fb13f38",null),(0,b.registerServerReference)(i,"700b5d4e05d83a5919120c7f580da38793c1700815",null),(0,b.registerServerReference)(j,"6072d20d5de1f0c26e88fe5cd18ec8c4cb9fd7465d",null),(0,b.registerServerReference)(k,"60ccd64fe009585e10dd4843e0d70566bfc8a483c5",null),(0,b.registerServerReference)(l,"40623ef8eb807b83124cfc34ce790fae7963195869",null),a.s(["createGoal",()=>g,"createKeyResult",()=>h,"deleteGoal",()=>j,"deleteKeyResult",()=>l,"getGoalsByWorkspace",()=>f,"updateGoal",()=>i,"updateKeyResult",()=>k],54081);var m=a.i(25041),n=a.i(44306);async function o(a,b,e){try{let f=await (0,m.getCurrentUser)();if(!f)return{success:!1,error:"Unauthorized"};if(!e||""===e.trim())return{success:!1,error:"El mensaje no puede estar vacÃ­o"};if(f.id===a)return{success:!1,error:"No te puedes dar Kudos a ti mismo"};let g=await c.prisma.kudo.create({data:{message:e,points:10,senderId:f.id,receiverId:a,workspaceId:b}}),h=`ðŸŒŸ Kudo Recibido!`,i=`"${f.name||f.email}" te ha reconocido: ${e}`,j=b?`/workspace/${b}`:"/my-tasks";return await (0,n.sendNotificationToUser)(a,h,i,j),b&&(0,d.revalidatePath)(`/workspace/${b}`),(0,d.revalidatePath)("/"),{success:!0,data:g}}catch(a){return console.error("Error creating kudo:",a),{success:!1,error:a.message}}}async function p(a){try{let b=await c.prisma.kudo.findMany({where:{workspaceId:a},include:{sender:{select:{name:!0,email:!0}},receiver:{select:{name:!0,email:!0}}},orderBy:{createdAt:"desc"},take:10});return{success:!0,data:b}}catch(a){return console.error("Error in getWorkspaceKudos:",a),{success:!1,error:a.message}}}async function q(){try{let a=await c.prisma.kudo.findMany({include:{sender:{select:{name:!0,email:!0}},receiver:{select:{name:!0,email:!0}},workspace:{select:{name:!0}}},orderBy:{createdAt:"desc"},take:20});return{success:!0,data:a}}catch(a){return console.error("Error in getGlobalKudos:",a),{success:!1,error:a.message}}}(0,e.ensureServerEntryExports)([o,p,q]),(0,b.registerServerReference)(o,"70a0c612d63aad262b660c6b257df85998aa43bdd7",null),(0,b.registerServerReference)(p,"40f7f85b223a694c42fb5057f1ff55932b16fac46e",null),(0,b.registerServerReference)(q,"004d06cbe3ddb444d7621b34936172d454d5ba24ae",null),a.s(["createKudo",()=>o,"getGlobalKudos",()=>q,"getWorkspaceKudos",()=>p],231)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fb01a001._.js.map