module.exports=[63021,(a,b,c)=>{b.exports=a.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},66518,a=>{"use strict";var b=a.i(63021);let c=globalThis.prisma??new b.PrismaClient;a.s(["prisma",0,c])},37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},39615,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);async function e(){try{return await c.prisma.workspace.findMany({orderBy:{createdAt:"desc"}})}catch(a){return console.error("Error fetching workspaces:",a),[]}}async function f(a){try{let b=await c.prisma.workspace.create({data:{name:a}});return(0,d.revalidatePath)("/"),b}catch(a){throw console.error("Error creating workspace:",a),Error("Could not create workspace")}}async function g(a,b){try{let e=await c.prisma.workspace.update({where:{id:a},data:{name:b}});return(0,d.revalidatePath)("/"),e}catch(a){throw console.error("Error updating workspace:",a),Error("Could not update workspace")}}async function h(a){try{return await c.prisma.workspace.delete({where:{id:a}}),(0,d.revalidatePath)("/"),!0}catch(a){throw console.error("Error deleting workspace:",a),Error("Could not delete workspace")}}async function i(b){try{let d=await c.prisma.workspaceMember.findMany({where:{workspaceId:b},include:{user:!0}}),{getCurrentUser:e}=await a.A(36335),f=await e(),g=d.map(a=>a.user);return f&&!g.find(a=>a.id===f.id)&&g.push(f),g}catch(a){return console.error("Error fetching workspace members:",a),[]}}async function j(b){try{let{getCurrentUser:e}=await a.A(36335),f=await e();if(!f)return{error:"No autorizado"};return await c.prisma.workspaceMember.findUnique({where:{userId_workspaceId:{userId:f.id,workspaceId:b}}})||(await c.prisma.workspaceMember.create({data:{userId:f.id,workspaceId:b,role:"MEMBER"}}),(0,d.revalidatePath)(`/workspace/${b}`)),{success:!0}}catch(a){return console.error("Error joining workspace:",a),{error:"Error al unirse al proyecto"}}}async function k(a,b){try{let e=b.toLowerCase().trim();if(!e)return{error:"El email no puede estar vacío."};let f=await c.prisma.user.findUnique({where:{email:e}});if(f||(f=await c.prisma.user.create({data:{email:e,name:e.split("@")[0]}})),await c.prisma.workspaceMember.findUnique({where:{userId_workspaceId:{userId:f.id,workspaceId:a}}}))return{error:"Este usuario ya es miembro del Workspace."};return await c.prisma.workspaceMember.create({data:{userId:f.id,workspaceId:a,role:"MEMBER"}}),(0,d.revalidatePath)(`/workspace/${a}`),{success:!0,message:`Usuario ${e} a\xf1adido correctamente.`}}catch(a){return console.error("Error in inviteUserToWorkspace:",a),{error:"Hubo un error inesperado al invitar al usuario."}}}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h,i,j,k]),(0,b.registerServerReference)(e,"007df99478876faf1be0a9287652a497a9c330c5be",null),(0,b.registerServerReference)(f,"4057b6b122a1d227d93b4421561d1064d3daa794c6",null),(0,b.registerServerReference)(g,"60aaccbf2e1157c6c321521724da79b6083afd2a63",null),(0,b.registerServerReference)(h,"4079e265df772b313e9fb1f8ed53ccc6c2f1755d2f",null),(0,b.registerServerReference)(i,"40808c801d7bd5372c066b27d49f0dbf04a5e56f80",null),(0,b.registerServerReference)(j,"40211ca8d3d05ab60a741dbbfd1c44d01ba208ee63",null),(0,b.registerServerReference)(k,"6096ab7f90edfbad42d79925c9b912f741ade35bd0",null),a.s(["createWorkspace",()=>f,"deleteWorkspace",()=>h,"getWorkspaceMembers",()=>i,"getWorkspaces",()=>e,"inviteUserToWorkspace",()=>k,"joinWorkspace",()=>j,"updateWorkspace",()=>g])},39092,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/layout/SidebarLayout.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/layout/SidebarLayout.tsx <module evaluation>","default")},44871,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/layout/SidebarLayout.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/layout/SidebarLayout.tsx","default")},62326,a=>{"use strict";a.i(39092);var b=a.i(44871);a.n(b)},62994,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/ai/FloatingChatbot.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ai/FloatingChatbot.tsx <module evaluation>","default")},83528,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/ai/FloatingChatbot.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ai/FloatingChatbot.tsx","default")},12759,a=>{"use strict";a.i(62994);var b=a.i(83528);a.n(b)},10745,a=>{"use strict";a.s(["ThemeProvider",()=>c,"useTheme",()=>d]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/theme/ThemeProvider.tsx <module evaluation>","ThemeProvider"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/theme/ThemeProvider.tsx <module evaluation>","useTheme")},52858,a=>{"use strict";a.s(["ThemeProvider",()=>c,"useTheme",()=>d]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/theme/ThemeProvider.tsx","ThemeProvider"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/theme/ThemeProvider.tsx","useTheme")},46045,a=>{"use strict";a.i(10745);var b=a.i(52858);a.n(b)},33925,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/auth/AuthProvider.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/auth/AuthProvider.tsx <module evaluation>","default")},4220,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/auth/AuthProvider.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/auth/AuthProvider.tsx","default")},33039,a=>{"use strict";a.i(33925);var b=a.i(4220);a.n(b)},27572,a=>{"use strict";var b=a.i(7997),c=a.i(62326),d=a.i(12759),e=a.i(46045),f=a.i(33039),g=a.i(39615);async function h({children:a}){let h=[];try{h=await (0,g.getWorkspaces)()}catch(a){console.warn("DB not connected yet, skipping workspace fetch in layout")}return(0,b.jsx)("html",{lang:"es",suppressHydrationWarning:!0,children:(0,b.jsx)("body",{suppressHydrationWarning:!0,children:(0,b.jsx)(e.ThemeProvider,{children:(0,b.jsxs)(f.default,{children:[(0,b.jsx)(c.default,{initialWorkspaces:h,children:a}),(0,b.jsx)(d.default,{})]})})})})}a.s(["default",()=>h,"dynamic",0,"force-dynamic","metadata",0,{title:"NextTask - Gestión de Proyectos",description:"Plataforma integral de gestión de proyectos y workspaces."}])},36335,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__be506f2b._.js","server/chunks/ssr/_93b88e42._.js"].map(b=>a.l(b))).then(()=>b(25041)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3b7c70d0._.js.map