module.exports=[12515,a=>{a.v({addCol:"TableView-module__u6Pjnq__addCol",assigneeSelect:"TableView-module__u6Pjnq__assigneeSelect",avatar:"TableView-module__u6Pjnq__avatar",columns:"TableView-module__u6Pjnq__columns",container:"TableView-module__u6Pjnq__container",dateInput:"TableView-module__u6Pjnq__dateInput",deleteBtn:"TableView-module__u6Pjnq__deleteBtn",dueDate:"TableView-module__u6Pjnq__dueDate",editableInput:"TableView-module__u6Pjnq__editableInput",expandIcon:"TableView-module__u6Pjnq__expandIcon",group:"TableView-module__u6Pjnq__group",groupHeader:"TableView-module__u6Pjnq__groupHeader",groupTitle:"TableView-module__u6Pjnq__groupTitle",indicator:"TableView-module__u6Pjnq__indicator",newTaskInput:"TableView-module__u6Pjnq__newTaskInput",owner:"TableView-module__u6Pjnq__owner",priority:"TableView-module__u6Pjnq__priority",progressCounter:"TableView-module__u6Pjnq__progressCounter",rowExpandBtn:"TableView-module__u6Pjnq__rowExpandBtn",status:"TableView-module__u6Pjnq__status",tableWrapper:"TableView-module__u6Pjnq__tableWrapper",taskList:"TableView-module__u6Pjnq__taskList",taskRow:"TableView-module__u6Pjnq__taskRow",taskTitle:"TableView-module__u6Pjnq__taskTitle",timeline:"TableView-module__u6Pjnq__timeline"})},47248,a=>{a.v({checkbox:"SubtaskList-module__D3Sumq__checkbox",completed:"SubtaskList-module__D3Sumq__completed",deleteBtn:"SubtaskList-module__D3Sumq__deleteBtn",iconHolder:"SubtaskList-module__D3Sumq__iconHolder",newInput:"SubtaskList-module__D3Sumq__newInput",newSubtaskRow:"SubtaskList-module__D3Sumq__newSubtaskRow",subtaskContainer:"SubtaskList-module__D3Sumq__subtaskContainer",subtaskInput:"SubtaskList-module__D3Sumq__subtaskInput",subtaskItem:"SubtaskList-module__D3Sumq__subtaskItem",subtaskList:"SubtaskList-module__D3Sumq__subtaskList"})},79985,a=>{a.v({assigneeAvatar:"BoardView-module__QxD3iq__assigneeAvatar",boardContainer:"BoardView-module__QxD3iq__boardContainer",boardScroll:"BoardView-module__QxD3iq__boardScroll",boardTitle:"BoardView-module__QxD3iq__boardTitle",card:"BoardView-module__QxD3iq__card",cardActions:"BoardView-module__QxD3iq__cardActions",cardFooter:"BoardView-module__QxD3iq__cardFooter",cardHeader:"BoardView-module__QxD3iq__cardHeader",cardTitle:"BoardView-module__QxD3iq__cardTitle",column:"BoardView-module__QxD3iq__column",columnBody:"BoardView-module__QxD3iq__columnBody",columnHeader:"BoardView-module__QxD3iq__columnHeader",columnsWrapper:"BoardView-module__QxD3iq__columnsWrapper",comments:"BoardView-module__QxD3iq__comments",dragOver:"BoardView-module__QxD3iq__dragOver",dragging:"BoardView-module__QxD3iq__dragging",iconBtn:"BoardView-module__QxD3iq__iconBtn",priorityBadge:"BoardView-module__QxD3iq__priorityBadge",subtaskBadge:"BoardView-module__QxD3iq__subtaskBadge"})},95779,a=>{a.v({btn:"CalendarView-module__qaIh9G__btn",btnIcon:"CalendarView-module__qaIh9G__btnIcon",calendarContainer:"CalendarView-module__qaIh9G__calendarContainer",controls:"CalendarView-module__qaIh9G__controls",dayCell:"CalendarView-module__qaIh9G__dayCell",dayName:"CalendarView-module__qaIh9G__dayName",dayNumber:"CalendarView-module__qaIh9G__dayNumber",emptyCell:"CalendarView-module__qaIh9G__emptyCell",grid:"CalendarView-module__qaIh9G__grid",header:"CalendarView-module__qaIh9G__header",monthTitle:"CalendarView-module__qaIh9G__monthTitle",pillText:"CalendarView-module__qaIh9G__pillText",taskPill:"CalendarView-module__qaIh9G__taskPill",tasksWrapper:"CalendarView-module__qaIh9G__tasksWrapper",today:"CalendarView-module__qaIh9G__today"})},3819,a=>{a.v({barProgressText:"GanttView-module__6fNYJq__barProgressText",dayHeader:"GanttView-module__6fNYJq__dayHeader",ganttBar:"GanttView-module__6fNYJq__ganttBar",ganttBody:"GanttView-module__6fNYJq__ganttBody",ganttContainer:"GanttView-module__6fNYJq__ganttContainer",ganttHeader:"GanttView-module__6fNYJq__ganttHeader",ganttRow:"GanttView-module__6fNYJq__ganttRow",ganttScrollable:"GanttView-module__6fNYJq__ganttScrollable",taskLabel:"GanttView-module__6fNYJq__taskLabel",taskLabelHeader:"GanttView-module__6fNYJq__taskLabelHeader",timelineHeader:"GanttView-module__6fNYJq__timelineHeader",timelineRow:"GanttView-module__6fNYJq__timelineRow",todayHeader:"GanttView-module__6fNYJq__todayHeader",todayLine:"GanttView-module__6fNYJq__todayLine"})},29954,a=>{a.v({avatar:"WorkloadView-module__-aKbHG__avatar",body:"WorkloadView-module__-aKbHG__body",bubble:"WorkloadView-module__-aKbHG__bubble",cell:"WorkloadView-module__-aKbHG__cell",dayHeader:"WorkloadView-module__-aKbHG__dayHeader",dayNum:"WorkloadView-module__-aKbHG__dayNum",dayWeek:"WorkloadView-module__-aKbHG__dayWeek",dot:"WorkloadView-module__-aKbHG__dot",headerRow:"WorkloadView-module__-aKbHG__headerRow",legend:"WorkloadView-module__-aKbHG__legend",legendItem:"WorkloadView-module__-aKbHG__legendItem",memberHeader:"WorkloadView-module__-aKbHG__memberHeader",memberInfo:"WorkloadView-module__-aKbHG__memberInfo",memberName:"WorkloadView-module__-aKbHG__memberName",memberRow:"WorkloadView-module__-aKbHG__memberRow",timelineHeader:"WorkloadView-module__-aKbHG__timelineHeader",timelineRow:"WorkloadView-module__-aKbHG__timelineRow",today:"WorkloadView-module__-aKbHG__today",weekend:"WorkloadView-module__-aKbHG__weekend",weekendCell:"WorkloadView-module__-aKbHG__weekendCell",workloadContainer:"WorkloadView-module__-aKbHG__workloadContainer",workloadScrollable:"WorkloadView-module__-aKbHG__workloadScrollable"})},17520,a=>{a.v({active:"TaskManager-module__k8wXda__active",taskManager:"TaskManager-module__k8wXda__taskManager",toggleBtn:"TaskManager-module__k8wXda__toggleBtn",toolbar:"TaskManager-module__k8wXda__toolbar",viewToggles:"TaskManager-module__k8wXda__viewToggles"})},10738,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(12515),e=a.i(47248),f=a.i(5050);let g=(0,f.createServerReference)("70500d97c2d7f0e7b72e77e2e1e7b5b25f14d7a318",f.callServer,void 0,f.findSourceMapURL,"createSubtask"),h=(0,f.createServerReference)("703b43e061b6b2c4c223531da33bdd9e3a78bf8d78",f.callServer,void 0,f.findSourceMapURL,"toggleSubtaskCompletion"),i=(0,f.createServerReference)("70e52966c822f12fd1da39158aa024ac88fdf29978",f.callServer,void 0,f.findSourceMapURL,"updateSubtaskTitle"),j=(0,f.createServerReference)("60ea9fefb3f836063012818b5b33c92d9d5d1f057b",f.callServer,void 0,f.findSourceMapURL,"deleteSubtask");function k({taskId:a,workspaceId:d,subtasks:f,onSubtasksChange:k}){let[l,m]=(0,c.useState)(""),[n,o]=(0,c.useTransition)(),p=async b=>{"Enter"===b.key&&l.trim()&&(m(""),k(a,[...f,{id:`temp-${Date.now()}`,title:l,isCompleted:!1}]),o(async()=>{try{let b=await g(a,d,l);k(a,[...f,b])}catch(b){console.error("Error creating subtask",b),k(a,f)}}))};return(0,b.jsxs)("div",{className:e.default.subtaskContainer,children:[(0,b.jsx)("div",{className:e.default.subtaskList,children:f.map(c=>(0,b.jsxs)("div",{className:`${e.default.subtaskItem} ${c.isCompleted?e.default.completed:""}`,children:[(0,b.jsx)("input",{type:"checkbox",className:e.default.checkbox,checked:c.isCompleted,onChange:()=>{let b;return b=!c.isCompleted,void(k(a,f.map(a=>a.id===c.id?{...a,isCompleted:b}:a)),o(async()=>{try{c.id.startsWith("temp")||await h(c.id,d,b)}catch(b){console.error(b),k(a,f)}}))}}),(0,b.jsx)("input",{type:"text",className:e.default.subtaskInput,defaultValue:c.title,onBlur:b=>{var e,g;return e=c.id,void(c.title===(g=b.target.value)||!g.trim()||(k(a,f.map(a=>a.id===e?{...a,title:g}:a)),o(async()=>{try{e.startsWith("temp")||await i(e,d,g)}catch(b){console.error(b),k(a,f)}})))}}),(0,b.jsx)("button",{className:e.default.deleteBtn,onClick:()=>{var b;return b=c.id,void(k(a,f.filter(a=>a.id!==b)),o(async()=>{try{b.startsWith("temp")||await j(b,d)}catch(b){console.error(b),k(a,f)}}))},children:"âœ•"})]},c.id))}),(0,b.jsxs)("div",{className:e.default.newSubtaskRow,children:[(0,b.jsx)("div",{className:e.default.iconHolder}),(0,b.jsx)("input",{type:"text",placeholder:"AÃ±adir subtarea (Enter)",className:e.default.newInput,value:l,onChange:a=>m(a.target.value),onKeyDown:p})]})]})}let l=(0,f.createServerReference)("783c79de5d0e9727cc38378205233af563f8f2ffd0",f.callServer,void 0,f.findSourceMapURL,"createCheckIn"),m=(0,f.createServerReference)("40edc25db179ad1a463eb0478d28429bca3250d665",f.callServer,void 0,f.findSourceMapURL,"getTaskCheckIns");function n({taskId:a,onClose:d}){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,n]=(0,c.useState)(!0);(0,c.useEffect)(()=>{j(!0),(async()=>{n(!0);let b=await m(a);b.success&&b.data&&f(b.data),n(!1)})()},[a]);let[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("NORMAL"),[u,v]=(0,c.useState)(!1),w=async()=>{if(!o.trim())return;v(!0);let b=await l(a,o,q.trim()||null,s);b.success&&b.data?(f([{id:b.data.id,accomplishments:b.data.accomplishments,blockers:b.data.blockers,morale:b.data.morale,createdAt:b.data.createdAt,user:{name:"Yo",email:""}},...e]),h(!1),p(""),r(""),t("NORMAL")):alert("Error: "+b.error),v(!1)};return(0,b.jsxs)("div",{style:{backgroundColor:"var(--surface)",padding:"1.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",position:"relative"},children:[d&&(0,b.jsx)("button",{onClick:d,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",color:"var(--text)",cursor:"pointer",fontSize:"1.2rem"},children:"âœ•"}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",marginTop:d?"1rem":"0"},children:[(0,b.jsx)("h2",{style:{fontSize:"1.25rem",color:"var(--foreground)"},children:"Log de Progreso (Tarea)"}),(0,b.jsx)("button",{onClick:()=>h(!0),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-sm)",backgroundColor:"var(--primary)",color:"white",border:"none",cursor:"pointer",fontWeight:"bold"},children:"ðŸ“ AÃ±adir Reporte"})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.map(a=>{var c;return(0,b.jsxs)("div",{style:{padding:"1rem",backgroundColor:"var(--background)",borderRadius:"var(--radius-sm)",borderLeft:`4px solid ${"ESTRESADO"===a.morale?"var(--danger)":"EXCELENTE"===a.morale?"var(--status-ready)":"gray"}`},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.8rem"},children:[(0,b.jsx)("strong",{style:{color:"var(--primary)"},children:a.user.name||a.user.email}),(0,b.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:i?new Date(a.createdAt).toLocaleDateString():""})]}),(0,b.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[(0,b.jsx)("strong",{children:"âœ… Logros: "})," ",(0,b.jsx)("span",{style:{color:"var(--text)"},children:a.accomplishments})]}),a.blockers&&(0,b.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"0.9rem"},children:[(0,b.jsx)("strong",{children:"ðŸš§ Bloqueos: "})," ",(0,b.jsx)("span",{style:{color:"var(--text)"},children:a.blockers})]}),(0,b.jsxs)("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",color:"var(--text-muted)"},children:["MotivaciÃ³n: ","EXCELENTE"===(c=a.morale)?"ðŸ¤© Excelente":"ESTRESADO"===c?"ðŸ¥µ Estresado":"ðŸ™‚ Normal"]})]},a.id)}),k&&0===e.length&&(0,b.jsx)("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"Cargando historial..."}),!k&&0===e.length&&(0,b.jsx)("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"AÃºn no hay reportes de progreso en esta tarea."})]}),g&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,b.jsxs)("div",{style:{backgroundColor:"var(--surface)",padding:"2rem",borderRadius:"var(--radius-md)",width:"500px",maxWidth:"90%"},children:[(0,b.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Escribe tu Check-In"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿QuÃ© lograste avanzar hoy/esta semana? *"}),(0,b.jsx)("textarea",{value:o,onChange:a=>p(a.target.value),style:{width:"100%",height:"80px",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿Hay algo bloqueando tu trabajo? (Opcional)"}),(0,b.jsx)("textarea",{value:q,onChange:a=>r(a.target.value),placeholder:"ObstÃ¡culos, falta de recursos...",style:{width:"100%",height:"60px",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"gray",fontWeight:"bold"},children:"Â¿CuÃ¡l es tu estado de Ã¡nimo?"}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border-color)"},children:[(0,b.jsx)("option",{value:"EXCELENTE",children:"ðŸ¤© Excelente, muy motivado"}),(0,b.jsx)("option",{value:"NORMAL",children:"ðŸ™‚ Bien, normal"}),(0,b.jsx)("option",{value:"ESTRESADO",children:"ðŸ¥µ Estresado o frustrado"})]})]})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",marginTop:"1.5rem"},children:[(0,b.jsx)("button",{onClick:()=>h(!1),style:{padding:"0.5rem 1rem",background:"transparent",color:"var(--text)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:"Cancelar"}),(0,b.jsx)("button",{onClick:w,disabled:u||!o.trim(),style:{padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:u?"Enviando...":"Enviar Reporte"})]})]})})]})}function o({tasks:a,members:e,onCreateTask:f,onUpdateTask:g,onDeleteTask:h}){let[i,j]=(0,c.useState)(""),[l,m]=(0,c.useState)({}),[o,p]=(0,c.useState)(null),q=a=>{if(!a)return"";let b=new Date(a);return isNaN(b.getTime())?"":b.toISOString().split("T")[0]};return(0,b.jsxs)("div",{className:d.default.container,children:[(0,b.jsx)("div",{className:d.default.tableWrapper,children:(0,b.jsxs)("div",{className:d.default.group,children:[(0,b.jsxs)("div",{className:d.default.groupHeader,children:[(0,b.jsxs)("div",{className:d.default.groupTitle,style:{color:"var(--primary)"},children:[(0,b.jsx)("span",{className:d.default.expandIcon,children:"â–¼"})," Tareas del Proyecto"]}),(0,b.jsxs)("div",{className:d.default.columns,children:[(0,b.jsx)("span",{children:"DueÃ±o"}),(0,b.jsx)("span",{children:"Estado"}),(0,b.jsx)("span",{children:"Cronograma"}),(0,b.jsx)("span",{children:"Prioridad"}),(0,b.jsx)("span",{children:"+"})]})]}),(0,b.jsxs)("div",{className:d.default.taskList,children:[a.map(a=>{let f=!!l[a.id],i=a.subtasks?.length||0,j=a.subtasks?.filter(a=>a.isCompleted).length||0;return(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsxs)("div",{className:d.default.taskRow,children:[(0,b.jsx)("div",{className:d.default.indicator,style:{backgroundColor:"var(--primary)"}}),(0,b.jsxs)("div",{className:d.default.taskTitle,children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void m(a=>({...a,[b]:!a[b]}))},className:d.default.rowExpandBtn,title:f?"Colapsar subtareas":"Expandir subtareas",children:f?"â–¼":"â–¶"}),(0,b.jsx)("input",{type:"text",defaultValue:a.title,onBlur:b=>{b.target.value!==a.title&&g(a.id,{title:b.target.value})},className:d.default.editableInput}),i>0&&(0,b.jsxs)("span",{className:d.default.progressCounter,title:"Subtareas completadas",children:[j,"/",i]})]}),(0,b.jsx)("div",{className:d.default.owner,children:(0,b.jsxs)("select",{className:d.default.assigneeSelect,value:a.assignees?.[0]?.user?.id||"",onChange:b=>g(a.id,{assigneeId:b.target.value||null}),children:[(0,b.jsx)("option",{value:"",children:"Sin Asignar"}),e.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name||a.email},a.id))]})}),(0,b.jsx)("div",{className:d.default.status,style:{backgroundColor:(a=>{switch(a){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--status-default)"}})(a.status)},onClick:()=>{let b="TODO"===a.status?"IN_PROGRESS":"IN_PROGRESS"===a.status?"DONE":"DONE"===a.status?"STUCK":"TODO";g(a.id,{status:b})},title:"Click para cambiar",children:(a=>{switch(a){case"DONE":return"Listo";case"IN_PROGRESS":return"En curso";case"STUCK":return"Detenido";default:return"Por Hacer"}})(a.status)}),(0,b.jsxs)("div",{className:d.default.timeline,children:[(0,b.jsx)("input",{type:"date",className:d.default.dateInput,defaultValue:q(a.startDate),onChange:b=>g(a.id,{startDate:b.target.value?new Date(b.target.value):null}),title:"Fecha de inicio"}),(0,b.jsx)("span",{children:"-"}),(0,b.jsx)("input",{type:"date",className:d.default.dateInput,defaultValue:q(a.dueDate),onChange:b=>g(a.id,{dueDate:b.target.value?new Date(b.target.value):null}),title:"Fecha de entrega"})]}),(0,b.jsx)("div",{className:d.default.priority,style:{backgroundColor:(a=>{switch(a){case"URGENT":return"var(--status-stuck)";case"HIGH":return"var(--status-working)";case"MEDIUM":return"var(--status-blue)";default:return"var(--status-default)"}})(a.priority)},onClick:()=>{let b="LOW"===a.priority?"MEDIUM":"MEDIUM"===a.priority?"HIGH":"HIGH"===a.priority?"URGENT":"LOW";g(a.id,{priority:b})},title:"Click para cambiar",children:(a=>{switch(a){case"URGENT":return"CrÃ­tica";case"HIGH":return"Alta";case"MEDIUM":return"Media";default:return"Baja"}})(a.priority)}),(0,b.jsxs)("div",{className:d.default.addCol,children:[(0,b.jsx)("button",{onClick:()=>p(a.id),className:d.default.deleteBtn,title:"Reporte de Progreso",children:"ðŸ“"}),(0,b.jsx)("button",{onClick:()=>h(a.id),className:d.default.deleteBtn,children:"ðŸ—‘ï¸"})]})]}),f&&(0,b.jsx)(k,{taskId:a.id,workspaceId:a.workspaces?.[0]?.workspaceId||"",subtasks:a.subtasks||[],onSubtasksChange:(b,c)=>{let d={subtasks:c};if(c.length>0){let b=c.filter(a=>a.isCompleted).length;b===c.length&&"DONE"!==a.status?d.status="DONE":b>0&&b<c.length&&"TODO"===a.status?d.status="IN_PROGRESS":0===b&&"DONE"===a.status&&(d.status="TODO")}g(b,d)}})]},a.id)}),(0,b.jsxs)("div",{className:d.default.taskRow,children:[(0,b.jsx)("div",{className:d.default.indicator,style:{backgroundColor:"transparent"}}),(0,b.jsx)("div",{className:d.default.taskTitle,children:(0,b.jsx)("input",{type:"text",placeholder:"+ AÃ±adir tarea (Enter para guardar)",value:i,onChange:a=>j(a.target.value),onKeyDown:a=>{"Enter"===a.key&&i.trim()&&(f(i,"MEDIUM"),j(""))},className:d.default.newTaskInput})}),(0,b.jsx)("div",{className:d.default.owner}),(0,b.jsx)("div",{className:d.default.status}),(0,b.jsx)("div",{className:d.default.timeline}),(0,b.jsx)("div",{className:d.default.priority})]})]})]})}),o&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,b.jsx)("div",{style:{width:"600px",maxWidth:"90%",maxHeight:"90vh",overflowY:"auto"},children:(0,b.jsx)(n,{taskId:o,onClose:()=>p(null)})})})]})}var p=a.i(79985);function q({tasks:a,onUpdateTask:d,onDeleteTask:e}){let[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),l=()=>{i(null)};return(0,b.jsxs)("div",{className:p.default.boardContainer,children:[(0,b.jsx)("h2",{className:p.default.boardTitle,children:"Tablero de Tareas"}),(0,b.jsx)("div",{className:p.default.boardScroll,children:(0,b.jsx)("div",{className:p.default.columnsWrapper,children:[{id:"TODO",label:"Por Hacer",color:"var(--status-default)"},{id:"IN_PROGRESS",label:"En Curso",color:"var(--status-working)"},{id:"DONE",label:"Listo",color:"var(--status-ready)"},{id:"STUCK",label:"Detenido",color:"var(--status-stuck)"}].map(c=>{let j=a.filter(a=>a.status===c.id);return(0,b.jsxs)("div",{className:`${p.default.column} ${h===c.id?p.default.dragOver:""}`,onDragOver:a=>{var b;return b=c.id,void(a.preventDefault(),a.dataTransfer.dropEffect="move",h!==b&&i(b))},onDragLeave:l,onDrop:b=>((b,c)=>{b.preventDefault(),i(null);let e=b.dataTransfer.getData("text/plain");if(e&&f===e){let b=a.find(a=>a.id===e);b&&b.status!==c&&d(e,{status:c})}g(null)})(b,c.id),children:[(0,b.jsxs)("div",{className:p.default.columnHeader,style:{backgroundColor:c.color},children:[c.label," / ",j.length]}),(0,b.jsx)("div",{className:p.default.columnBody,children:j.map(a=>{let c=a.subtasks||[],d=c.filter(a=>a.isCompleted).length,h=c.length>0,i=a.assignees?.[0]?.user;return(0,b.jsxs)("div",{className:`${p.default.card} ${f===a.id?p.default.dragging:""}`,draggable:!0,onDragStart:b=>{var c;g(c=a.id),b.dataTransfer.setData("text/plain",c),b.dataTransfer.effectAllowed="move"},children:[(0,b.jsxs)("div",{className:p.default.cardHeader,children:["LOW"!==a.priority&&(0,b.jsx)("span",{className:p.default.priorityBadge,children:"URGENT"===a.priority?"ðŸ”¥ðŸ”¥ðŸ”¥":"HIGH"===a.priority?"â­â­â­":"â­â­"}),i&&(0,b.jsx)("span",{className:p.default.assigneeAvatar,title:i.name||i.email,children:i.name?i.name.charAt(0).toUpperCase():"ðŸ‘¤"})]}),(0,b.jsx)("div",{className:p.default.cardTitle,children:a.title}),(0,b.jsxs)("div",{className:p.default.cardFooter,children:[h?(0,b.jsxs)("div",{className:p.default.subtaskBadge,title:"Subtareas completadas",children:[(0,b.jsx)("span",{children:"ðŸ“‹"})," ",d,"/",c.length]}):(0,b.jsx)("div",{}),(0,b.jsxs)("div",{className:p.default.cardActions,children:[(0,b.jsx)("button",{onClick:()=>k(a.id),className:p.default.iconBtn,title:"Reportes de Progreso",children:"ðŸ“"}),(0,b.jsx)("button",{onClick:()=>e(a.id),className:p.default.iconBtn,title:"Borrar Tarea",children:"ðŸ—‘ï¸"})]})]})]},a.id)})})]},c.id)})})}),j&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,b.jsx)("div",{style:{width:"600px",maxWidth:"90%",maxHeight:"90vh",overflowY:"auto"},children:(0,b.jsx)(n,{taskId:j,onClose:()=>k(null)})})})]})}var r=a.i(95779);function s({tasks:a,onUpdateTask:d}){let[e,f]=(0,c.useState)(new Date),g=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),h=new Date(e.getFullYear(),e.getMonth(),1).getDay(),i=(()=>{let a=[];for(let b=0;b<h;b++)a.push(null);for(let b=1;b<=g;b++)a.push(b);return a})();return(0,b.jsxs)("div",{className:r.default.calendarContainer,children:[(0,b.jsxs)("div",{className:r.default.header,children:[(0,b.jsxs)("div",{className:r.default.monthTitle,children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e.getMonth()]," ",e.getFullYear()]}),(0,b.jsxs)("div",{className:r.default.controls,children:[(0,b.jsx)("button",{onClick:()=>{f(new Date)},className:r.default.btn,children:"Hoy"}),(0,b.jsx)("button",{onClick:()=>{f(new Date(e.getFullYear(),e.getMonth()-1,1))},className:r.default.btnIcon,children:"<"}),(0,b.jsx)("button",{onClick:()=>{f(new Date(e.getFullYear(),e.getMonth()+1,1))},className:r.default.btnIcon,children:">"})]})]}),(0,b.jsxs)("div",{className:r.default.grid,children:[["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"].map(a=>(0,b.jsx)("div",{className:r.default.dayName,children:a},a)),i.map((c,d)=>{let f=(b=>{if(!b)return[];let c=new Date(e.getFullYear(),e.getMonth(),b).toISOString().split("T")[0];return a.filter(a=>!!a.dueDate&&(a.dueDate instanceof Date?a.dueDate.toISOString().split("T")[0]:new Date(a.dueDate).toISOString().split("T")[0])===c)})(c);return(0,b.jsxs)("div",{className:`${r.default.dayCell} ${c?"":r.default.emptyCell} ${(a=>{if(!a)return!1;let b=new Date;return a===b.getDate()&&e.getMonth()===b.getMonth()&&e.getFullYear()===b.getFullYear()})(c)?r.default.today:""}`,children:[(0,b.jsx)("div",{className:r.default.dayNumber,children:c}),(0,b.jsx)("div",{className:r.default.tasksWrapper,children:f.map(a=>(0,b.jsx)("div",{className:r.default.taskPill,style:{borderLeftColor:(a=>{switch(a){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--status-default)"}})(a.status)},title:a.title,children:(0,b.jsx)("span",{className:r.default.pillText,children:a.title})},a.id))})]},d)})]})]})}var t=a.i(3819);function u({tasks:a}){let d=new Date;d.setHours(0,0,0,0);let e=new Date(d);e.setDate(d.getDate()-15);let f=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<60;b++){let c=new Date(e);c.setDate(e.getDate()+b),a.push(c)}return a},[e]),g=a.filter(a=>a.startDate&&a.dueDate).sort((a,b)=>new Date(a.startDate).getTime()-new Date(b.startDate).getTime());return(0,b.jsx)("div",{className:t.default.ganttContainer,children:(0,b.jsxs)("div",{className:t.default.ganttScrollable,children:[(0,b.jsxs)("div",{className:t.default.ganttHeader,children:[(0,b.jsx)("div",{className:t.default.taskLabelHeader,children:"Tarea"}),(0,b.jsx)("div",{className:t.default.timelineHeader,children:f.map((a,c)=>{let e=a.getTime()===d.getTime();return(0,b.jsxs)("div",{className:`${t.default.dayHeader} ${e?t.default.todayHeader:""}`,children:[(0,b.jsx)("span",{children:a.getDate()}),(0,b.jsx)("span",{style:{fontSize:"0.65rem",opacity:.7},children:a.toLocaleDateString("es",{weekday:"short"})})]},c)})})]}),(0,b.jsxs)("div",{className:t.default.ganttBody,children:[(0,b.jsx)("div",{className:t.default.todayLine,style:{left:"calc(250px + 600px + 20px)"}}),0===g.length?(0,b.jsx)("div",{style:{padding:"2rem",color:"#888"},children:"No hay tareas con fechas de inicio y fin asignadas para mostrar en el diagrama de Gantt."}):g.map(a=>{let c=new Date(a.startDate);c.setHours(0,0,0,0);let d=new Date(a.dueDate);d.setHours(0,0,0,0);let f=Math.floor((c.getTime()-e.getTime())/864e5),g=Math.max(1,Math.floor((d.getTime()-c.getTime())/864e5)+1);return(0,b.jsxs)("div",{className:t.default.ganttRow,children:[(0,b.jsx)("div",{className:t.default.taskLabel,title:a.title,children:a.title}),(0,b.jsx)("div",{className:t.default.timelineRow,children:f>=0&&f<60&&(0,b.jsx)("div",{className:t.default.ganttBar,style:{left:`${40*f}px`,width:`${40*g-4}px`,backgroundColor:(a=>{switch(a){case"DONE":return"var(--status-ready)";case"IN_PROGRESS":return"var(--status-working)";case"STUCK":return"var(--status-stuck)";default:return"var(--primary)"}})(a.status)},title:`${a.title} (${c.toLocaleDateString()} - ${d.toLocaleDateString()})`,children:(0,b.jsx)("span",{className:t.default.barProgressText,children:"DONE"===a.status?"100%":""})})})]},a.id)})]})]})})}var v=a.i(29954);function w({tasks:a,members:d}){let e=new Date;e.setHours(0,0,0,0);let f=new Date(e);f.setDate(e.getDate()-e.getDay()-7);let g=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<28;b++){let c=new Date(f);c.setDate(f.getDate()+b),a.push(c)}return a},[f]),h=[...d.map(a=>({id:a.id,name:a.name||a.email,isUnassigned:!1})),{id:"unassigned",name:"Sin Asignar",isUnassigned:!0}];return(0,b.jsxs)("div",{className:v.default.workloadContainer,children:[(0,b.jsxs)("div",{className:v.default.workloadScrollable,children:[(0,b.jsxs)("div",{className:v.default.headerRow,children:[(0,b.jsx)("div",{className:v.default.memberHeader,children:"Miembro del Equipo"}),(0,b.jsx)("div",{className:v.default.timelineHeader,children:g.map((a,c)=>{let d=a.getTime()===e.getTime(),f=0===a.getDay()||6===a.getDay();return(0,b.jsxs)("div",{className:`${v.default.dayHeader} ${d?v.default.today:""} ${f?v.default.weekend:""}`,children:[(0,b.jsx)("span",{className:v.default.dayNum,children:a.getDate()}),(0,b.jsx)("span",{className:v.default.dayWeek,children:a.toLocaleDateString("es",{weekday:"short"})})]},c)})})]}),(0,b.jsx)("div",{className:v.default.body,children:h.map(c=>(0,b.jsxs)("div",{className:v.default.memberRow,children:[(0,b.jsxs)("div",{className:v.default.memberInfo,children:[(0,b.jsx)("div",{className:v.default.avatar,children:c.isUnassigned?"?":c.name.charAt(0).toUpperCase()}),(0,b.jsx)("span",{className:v.default.memberName,children:c.name})]}),(0,b.jsx)("div",{className:v.default.timelineRow,children:g.map((d,e)=>{var f;let g=0,h=[];a.forEach(a=>{(c.isUnassigned?!a.assignees||0===a.assignees.length:a.assignees?.some(a=>a.user.id===c.id))&&"DONE"!==a.status&&((a,b)=>{if(!a.startDate||!a.dueDate)return!1;let c=new Date(a.startDate);c.setHours(0,0,0,0);let d=new Date(a.dueDate);return d.setHours(23,59,59,999),b>=c&&b<=d})(a,d)&&(g++,h.push(a.title))});let i=0===(f=g)?"transparent":1===f?"var(--primary)":2===f?"#f59e0b":"#ef4444",j=0===d.getDay()||6===d.getDay();return(0,b.jsx)("div",{className:`${v.default.cell} ${j?v.default.weekendCell:""}`,children:g>0&&(0,b.jsx)("div",{className:v.default.bubble,style:{backgroundColor:i},title:h.join("\n"),children:g})},e)})})]},c.id))})]}),(0,b.jsxs)("div",{className:v.default.legend,children:[(0,b.jsx)("span",{children:(0,b.jsx)("strong",{children:"Leyenda (Tareas activas por dÃ­a):"})}),(0,b.jsxs)("span",{className:v.default.legendItem,children:[(0,b.jsx)("span",{className:v.default.dot,style:{background:"var(--primary)"}})," 1 Tarea (Ã“ptimo)"]}),(0,b.jsxs)("span",{className:v.default.legendItem,children:[(0,b.jsx)("span",{className:v.default.dot,style:{background:"#f59e0b"}})," 2 Tareas (Alerta)"]}),(0,b.jsxs)("span",{className:v.default.legendItem,children:[(0,b.jsx)("span",{className:v.default.dot,style:{background:"#ef4444"}})," 3+ Tareas (Sobrecarga)"]})]})]})}let x=(0,f.createServerReference)("407c884cd690c207052838e8d0242021627178afb5",f.callServer,void 0,f.findSourceMapURL,"createTask"),y=(0,f.createServerReference)("70142ce74a16d569fe4b550b1eb58754160cf80109",f.callServer,void 0,f.findSourceMapURL,"updateTask"),z=(0,f.createServerReference)("60d6016544db5b9c94c5eecf4c552dbe5884ae49fd",f.callServer,void 0,f.findSourceMapURL,"deleteTask");var A=a.i(17520);function B({initialTasks:a,workspaceId:d,members:e,customCreateTask:f,customUpdateTask:g,customDeleteTask:h,initialCheckIns:i}){let[j,k]=(0,c.useState)("table"),[l,m]=(0,c.useState)(a),[n,p]=(0,c.useTransition)();(0,c.useEffect)(()=>{m(a)},[a]);let r=async(a,b="MEDIUM")=>{if(!a.trim())return;let c={id:`temp-${Date.now()}`,title:a,status:"TODO",priority:b,dueDate:null,assignees:[]};m(a=>[c,...a]),p(async()=>{try{f?await f(a,b):d&&await x({workspaceId:d,title:a,priority:b})}catch(a){console.error(a),m(a=>a.filter(a=>a.id!==c.id))}})},t=async(a,b)=>{m(c=>c.map(c=>{if(c.id===a){let a={...c,...b};if(void 0!==b.assigneeId)if(b.assigneeId){let c=e.find(a=>a.id===b.assigneeId);a.assignees=[{user:{id:b.assigneeId,name:c?.name,email:c?.email}}]}else a.assignees=[];return a}return c})),p(async()=>{try{g?await g(a,b):d&&await y(a,d,b)}catch(a){console.error("Failed to update task",a)}})},v=async a=>{confirm("Â¿Seguro que quieres borrar esta tarea?")&&(m(b=>b.filter(b=>b.id!==a)),p(async()=>{try{h?await h(a):d&&await z(a,d)}catch(a){console.error("Failed to delete task",a)}}))};return(0,b.jsxs)("div",{className:A.default.taskManager,children:[(0,b.jsx)("div",{className:A.default.toolbar,children:(0,b.jsxs)("div",{className:A.default.viewToggles,children:[(0,b.jsx)("button",{className:`${A.default.toggleBtn} ${"table"===j?A.default.active:""}`,onClick:()=>k("table"),children:"Tabla"}),(0,b.jsx)("button",{className:`${A.default.toggleBtn} ${"kanban"===j?A.default.active:""}`,onClick:()=>k("kanban"),children:"Kanban"}),(0,b.jsx)("button",{className:`${A.default.toggleBtn} ${"calendar"===j?A.default.active:""}`,onClick:()=>k("calendar"),children:"Calendario"}),(0,b.jsx)("button",{className:`${A.default.toggleBtn} ${"gantt"===j?A.default.active:""}`,onClick:()=>k("gantt"),children:"Gantt"}),(0,b.jsx)("button",{className:`${A.default.toggleBtn} ${"workload"===j?A.default.active:""}`,onClick:()=>k("workload"),children:"Carga de Trabajo"})]})}),"table"===j&&(0,b.jsx)(o,{tasks:l,members:e,onCreateTask:r,onUpdateTask:t,onDeleteTask:v}),"kanban"===j&&(0,b.jsx)(q,{tasks:l,onUpdateTask:t,onDeleteTask:v}),"calendar"===j&&(0,b.jsx)(s,{tasks:l,onUpdateTask:t}),"gantt"===j&&(0,b.jsx)(u,{tasks:l}),"workload"===j&&(0,b.jsx)(w,{tasks:l,members:e})]})}a.s(["default",()=>B],10738)}];

//# sourceMappingURL=src_components_board_e86ecbc3._.js.map