{"version":3,"sources":["turbopack:///[project]/src/components/layout/Sidebar.module.css [app-ssr] (css module)","turbopack:///[project]/src/components/layout/SidebarLayout.module.css [app-ssr] (css module)","../../../../src/components/layout/SidebarLayout.tsx","../../../../src/components/layout/Sidebar.tsx","../../../../src/app/actions/data%3Ac06f63%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A86fac9%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A111b02%20%3Ctext/javascript%3E","../../../../src/components/layout/WorkspaceListClient.tsx","../../../../src/app/actions/data%3Ae41b2b%20%3Ctext/javascript%3E","../../../../src/components/notifications/PushSubscriber.tsx","turbopack:///[project]/src/components/ai/FloatingChatbot.module.css [app-ssr] (css module)","../../../../src/components/ai/FloatingChatbot.tsx","../../../../src/app/actions/data%3Af055d0%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ac34fe8%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Adc5663%20%3Ctext/javascript%3E","../../../../src/components/auth/AuthProvider.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"Sidebar-module__XRNO5a__active\",\n  \"activeWs\": \"Sidebar-module__XRNO5a__activeWs\",\n  \"avatar\": \"Sidebar-module__XRNO5a__avatar\",\n  \"bottom\": \"Sidebar-module__XRNO5a__bottom\",\n  \"collapsed\": \"Sidebar-module__XRNO5a__collapsed\",\n  \"editingItem\": \"Sidebar-module__XRNO5a__editingItem\",\n  \"logo\": \"Sidebar-module__XRNO5a__logo\",\n  \"logoutBtn\": \"Sidebar-module__XRNO5a__logoutBtn\",\n  \"logoutBtnCollapsed\": \"Sidebar-module__XRNO5a__logoutBtnCollapsed\",\n  \"mobile\": \"Sidebar-module__XRNO5a__mobile\",\n  \"nav\": \"Sidebar-module__XRNO5a__nav\",\n  \"sidebar\": \"Sidebar-module__XRNO5a__sidebar\",\n  \"sidebarContent\": \"Sidebar-module__XRNO5a__sidebarContent\",\n  \"toggleBtn\": \"Sidebar-module__XRNO5a__toggleBtn\",\n  \"userInfo\": \"Sidebar-module__XRNO5a__userInfo\",\n  \"userName\": \"Sidebar-module__XRNO5a__userName\",\n  \"userSection\": \"Sidebar-module__XRNO5a__userSection\",\n  \"workspaceSelector\": \"Sidebar-module__XRNO5a__workspaceSelector\",\n  \"wsActions\": \"Sidebar-module__XRNO5a__wsActions\",\n  \"wsListItem\": \"Sidebar-module__XRNO5a__wsListItem\",\n});\n","__turbopack_context__.v({\n  \"backdrop\": \"SidebarLayout-module__UmuU3q__backdrop\",\n  \"contentCollapsed\": \"SidebarLayout-module__UmuU3q__contentCollapsed\",\n  \"contentMobile\": \"SidebarLayout-module__UmuU3q__contentMobile\",\n  \"fadeIn\": \"SidebarLayout-module__UmuU3q__fadeIn\",\n  \"layout\": \"SidebarLayout-module__UmuU3q__layout\",\n  \"mainContent\": \"SidebarLayout-module__UmuU3q__mainContent\",\n  \"mobileToggleBtn\": \"SidebarLayout-module__UmuU3q__mobileToggleBtn\",\n});\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport Sidebar from './Sidebar';\r\nimport styles from './SidebarLayout.module.css';\r\n\r\ninterface SidebarLayoutProps {\r\n    children: React.ReactNode;\r\n    initialWorkspaces: any[];\r\n}\r\n\r\nexport default function SidebarLayout({ children, initialWorkspaces }: SidebarLayoutProps) {\r\n    const [isCollapsed, setIsCollapsed] = useState(false);\r\n    const [isMobile, setIsMobile] = useState(false);\r\n    const [isMounted, setIsMounted] = useState(false);\r\n    const pathname = usePathname();\r\n\r\n    const isAuthPage = pathname === '/login' || pathname === '/register';\r\n\r\n    useEffect(() => {\r\n        setIsMounted(true);\r\n        const checkMobile = () => {\r\n            const mobile = window.innerWidth <= 768;\r\n            setIsMobile(mobile);\r\n            // Auto collapse on mobile initially\r\n            if (mobile) setIsCollapsed(true);\r\n            else setIsCollapsed(false);\r\n        };\r\n\r\n        checkMobile();\r\n        window.addEventListener('resize', checkMobile);\r\n        return () => window.removeEventListener('resize', checkMobile);\r\n    }, []);\r\n\r\n    // Auto-close sidebar on mobile when navigating\r\n    useEffect(() => {\r\n        if (isMobile && !isCollapsed) {\r\n            setIsCollapsed(true);\r\n        }\r\n    }, [pathname]);\r\n\r\n    const toggleSidebar = () => setIsCollapsed(!isCollapsed);\r\n\r\n    // Si es Login o Registro, no dibujamos la barra lateral para nada\r\n    if (isAuthPage) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return (\r\n        <div className={styles.layout}>\r\n            {/* Mobile Backdrop */}\r\n            {isMounted && isMobile && !isCollapsed && (\r\n                <div\r\n                    className={styles.backdrop}\r\n                    onClick={() => setIsCollapsed(true)}\r\n                />\r\n            )}\r\n\r\n            <Sidebar\r\n                initialWorkspaces={initialWorkspaces}\r\n                isCollapsed={isCollapsed}\r\n                isMobile={isMobile}\r\n                onToggle={toggleSidebar}\r\n            />\r\n\r\n            {/* Main Content Area */}\r\n            <div\r\n                className={`${styles.mainContent} ${isCollapsed ? styles.contentCollapsed : ''} ${isMobile ? styles.contentMobile : ''}`}\r\n            >\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useSession, signOut } from 'next-auth/react';\r\nimport styles from './Sidebar.module.css';\r\nimport WorkspaceListClient from './WorkspaceListClient';\r\nimport PushSubscriber from '@/components/notifications/PushSubscriber';\r\n\r\ninterface SidebarProps {\r\n    initialWorkspaces?: any[];\r\n    isCollapsed?: boolean;\r\n    isMobile?: boolean;\r\n    onToggle?: () => void;\r\n}\r\n\r\nexport default function Sidebar({ initialWorkspaces = [], isCollapsed = false, isMobile = false, onToggle }: SidebarProps) {\r\n    const pathname = usePathname();\r\n    const { data: session } = useSession();\r\n\r\n    return (\r\n        <aside className={`${styles.sidebar} ${isCollapsed ? styles.collapsed : ''} ${isMobile ? styles.mobile : ''}`}>\r\n            {/* Collapse Toggle Button */}\r\n            {onToggle && (\r\n                <button\r\n                    className={styles.toggleBtn}\r\n                    onClick={onToggle}\r\n                    title={isCollapsed ? \"Mostrar Men√∫\" : \"Ocultar Men√∫\"}\r\n                >\r\n                    {isCollapsed ? '„Äã' : '„Ää'}\r\n                </button>\r\n            )}\r\n\r\n            <div className={styles.sidebarContent}>\r\n                <div className={styles.logo}>\r\n                    <span className={styles.icon}>‚ö°</span>\r\n                    NextTask\r\n                </div>\r\n                <nav className={styles.nav}>\r\n                    <ul>\r\n                        <Link href=\"/\" style={{ textDecoration: 'none' }}>\r\n                            <li className={pathname === '/' ? styles.active : ''}>\r\n                                Dashboard Global\r\n                            </li>\r\n                        </Link>\r\n                        <Link href=\"/my-tasks\" style={{ textDecoration: 'none' }}>\r\n                            <li className={pathname === '/my-tasks' ? styles.active : ''}>\r\n                                Mis Tareas\r\n                            </li>\r\n                        </Link>\r\n                        <Link href=\"/reports\" style={{ textDecoration: 'none' }}>\r\n                            <li className={pathname === '/reports' ? styles.active : ''}>\r\n                                Reportes\r\n                            </li>\r\n                        </Link>\r\n                    </ul>\r\n                </nav>\r\n                <WorkspaceListClient initialWorkspaces={initialWorkspaces} />\r\n                <PushSubscriber />\r\n\r\n                {/* User Profile & Logout */}\r\n                <div className={styles.userSection}>\r\n                    {!isCollapsed && session?.user && (\r\n                        <div className={styles.userInfo}>\r\n                            <div className={styles.avatar}>{session.user.name?.charAt(0).toUpperCase()}</div>\r\n                            <span className={styles.userName}>{session.user.name}</span>\r\n                        </div>\r\n                    )}\r\n                    <button\r\n                        className={`${styles.logoutBtn} ${isCollapsed ? styles.logoutBtnCollapsed : ''}`}\r\n                        onClick={() => signOut({ callbackUrl: '/login' })}\r\n                        title=\"Cerrar Sessi√≥n\"\r\n                    >\r\n                        ‚éã {isCollapsed ? '' : 'Salir'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </aside>\r\n    );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"4057b6b122a1d227d93b4421561d1064d3daa794c6\":\"createWorkspace\"},\"src/app/actions/workspace.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"4057b6b122a1d227d93b4421561d1064d3daa794c6\",callServer,void 0,findSourceMapURL,\"createWorkspace\");export{$$RSC_SERVER_ACTION_1 as createWorkspace};","/* __next_internal_action_entry_do_not_use__ [{\"60aaccbf2e1157c6c321521724da79b6083afd2a63\":\"updateWorkspace\"},\"src/app/actions/workspace.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"60aaccbf2e1157c6c321521724da79b6083afd2a63\",callServer,void 0,findSourceMapURL,\"updateWorkspace\");export{$$RSC_SERVER_ACTION_2 as updateWorkspace};","/* __next_internal_action_entry_do_not_use__ [{\"4079e265df772b313e9fb1f8ed53ccc6c2f1755d2f\":\"deleteWorkspace\"},\"src/app/actions/workspace.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"4079e265df772b313e9fb1f8ed53ccc6c2f1755d2f\",callServer,void 0,findSourceMapURL,\"deleteWorkspace\");export{$$RSC_SERVER_ACTION_3 as deleteWorkspace};","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport styles from './Sidebar.module.css';\r\nimport { createWorkspace, updateWorkspace, deleteWorkspace } from '@/app/actions/workspace';\r\n\r\ninterface WorkspaceListClientProps {\r\n    initialWorkspaces: any[];\r\n}\r\n\r\nexport default function WorkspaceListClient({ initialWorkspaces }: WorkspaceListClientProps) {\r\n    const [workspaces, setWorkspaces] = useState(initialWorkspaces);\r\n    const [isCreating, setIsCreating] = useState(false);\r\n    const [newName, setNewName] = useState('');\r\n\r\n    // Edit state\r\n    const [editingWsId, setEditingWsId] = useState<string | null>(null);\r\n    const [editName, setEditName] = useState('');\r\n\r\n    const pathname = usePathname();\r\n    const router = useRouter();\r\n\r\n    const handleCreate = async () => {\r\n        if (!newName.trim()) return;\r\n        try {\r\n            const ws = await createWorkspace(newName);\r\n            setWorkspaces(prev => [ws, ...prev]);\r\n            setNewName('');\r\n            setIsCreating(false);\r\n        } catch (e) {\r\n            alert(\"Error creando el espacio de trabajo. ¬øEst√° conectada la BD?\");\r\n        }\r\n    };\r\n\r\n    const handleStartEdit = (ws: any, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        setEditingWsId(ws.id);\r\n        setEditName(ws.name);\r\n    };\r\n\r\n    const handleSaveEdit = async (e: React.MouseEvent | React.KeyboardEvent) => {\r\n        e.preventDefault();\r\n        if (!editName.trim() || !editingWsId) return;\r\n\r\n        try {\r\n            const updated = await updateWorkspace(editingWsId, editName);\r\n            setWorkspaces(prev => prev.map(w => w.id === editingWsId ? updated : w));\r\n            setEditingWsId(null);\r\n            setEditName('');\r\n        } catch (error) {\r\n            alert('Error al actualizar el workspace');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        if (!confirm('¬øEst√°s seguro de eliminar este espacio de trabajo? Se borrar√°n todas sus metas.')) return;\r\n\r\n        try {\r\n            await deleteWorkspace(id);\r\n            setWorkspaces(prev => prev.filter(w => w.id !== id));\r\n            if (pathname === `/workspace/${id}`) {\r\n                router.push('/');\r\n            }\r\n        } catch (error) {\r\n            alert('Error al eliminar el espacio de trabajo');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.workspaceSelector}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <span>Tus Espacios üëá</span>\r\n                <button onClick={() => setIsCreating(!isCreating)} style={{ cursor: 'pointer', background: 'none', border: 'none', color: 'var(--primary)' }}>\r\n                    +\r\n                </button>\r\n            </div>\r\n\r\n            {isCreating && (\r\n                <div style={{ display: 'flex', gap: '5px', marginTop: '10px' }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newName}\r\n                        onChange={(e) => setNewName(e.target.value)}\r\n                        placeholder=\"Nombre...\"\r\n                        style={{ width: '100%', padding: '4px', borderRadius: '4px', border: '1px solid #ddd' }}\r\n                    />\r\n                    <button onClick={handleCreate} style={{ padding: '4px 8px', background: 'var(--primary)', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>‚úì</button>\r\n                </div>\r\n            )}\r\n\r\n            <ul style={{ listStyle: 'none', padding: 0 }}>\r\n                {workspaces.length === 0 ? (\r\n                    <li>Sin espacios</li>\r\n                ) : (\r\n                    workspaces.map((ws) => {\r\n                        const isActive = pathname === `/workspace/${ws.id}`;\r\n                        const isEditing = editingWsId === ws.id;\r\n\r\n                        if (isEditing) {\r\n                            return (\r\n                                <li key={ws.id} className={styles.editingItem} style={{ display: 'flex', gap: '5px', padding: '0.5rem 0' }}>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={editName}\r\n                                        onChange={(e) => setEditName(e.target.value)}\r\n                                        onKeyDown={(e) => e.key === 'Enter' && handleSaveEdit(e)}\r\n                                        style={{ width: '100%', padding: '4px', borderRadius: '4px', border: '1px solid #ddd' }}\r\n                                        autoFocus\r\n                                    />\r\n                                    <button onClick={handleSaveEdit} style={{ background: 'none', border: 'none', cursor: 'pointer' }}>‚úÖ</button>\r\n                                    <button onClick={() => setEditingWsId(null)} style={{ background: 'none', border: 'none', cursor: 'pointer' }}>‚ùå</button>\r\n                                </li>\r\n                            );\r\n                        }\r\n\r\n                        return (\r\n                            <li key={ws.id} className={`${isActive ? styles.activeWs : ''} ${styles.wsListItem}`}>\r\n                                <Link href={`/workspace/${ws.id}`} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%', textDecoration: 'none', color: 'inherit' }}>\r\n                                    <span style={{ overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{ws.name}</span>\r\n                                    <div className={styles.wsActions}>\r\n                                        <button onClick={(e) => handleStartEdit(ws, e)} title=\"Renombrar\" style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: '12px' }}>‚úèÔ∏è</button>\r\n                                        <button onClick={(e) => handleDelete(ws.id, e)} title=\"Eliminar\" style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: '12px' }}>üóëÔ∏è</button>\r\n                                    </div>\r\n                                </Link>\r\n                            </li>\r\n                        );\r\n                    })\r\n                )}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"405e0d830509c8d72682aaa3f5bf299d1a2d884845\":\"savePushSubscription\"},\"src/app/actions/notifications.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"405e0d830509c8d72682aaa3f5bf299d1a2d884845\",callServer,void 0,findSourceMapURL,\"savePushSubscription\");export{$$RSC_SERVER_ACTION_0 as savePushSubscription};","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { savePushSubscription } from '@/app/actions/notifications';\r\n\r\nexport default function PushSubscriber() {\r\n    const [isSupported, setIsSupported] = useState(false);\r\n    const [subscription, setSubscription] = useState<PushSubscription | null>(null);\r\n    const [message, setMessage] = useState('');\r\n    const [isSubscribing, setIsSubscribing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if ('serviceWorker' in navigator && 'PushManager' in window) {\r\n            setIsSupported(true);\r\n            checkSubscription();\r\n        }\r\n    }, []);\r\n\r\n    const checkSubscription = async () => {\r\n        try {\r\n            let registration = await navigator.serviceWorker.getRegistration();\r\n            if (registration) {\r\n                const sub = await registration.pushManager.getSubscription();\r\n                setSubscription(sub);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error checking sub\", e);\r\n        }\r\n    };\r\n\r\n    const subscribeToPush = async () => {\r\n        setIsSubscribing(true);\r\n        setMessage('1/5: Verificando permisos...');\r\n        try {\r\n            const permission = await Notification.requestPermission();\r\n            if (permission !== 'granted') {\r\n                setMessage('Error: Permiso denegado por el usuario.');\r\n                setIsSubscribing(false);\r\n                return;\r\n            }\r\n\r\n            setMessage('2/5: Obteniendo Service Worker...');\r\n            let registration = await navigator.serviceWorker.getRegistration();\r\n            if (!registration) {\r\n                setMessage('2/5: Registrando Service Worker...');\r\n                await navigator.serviceWorker.register('/sw.js');\r\n            }\r\n\r\n            setMessage('3/5: Esperando que el Service Worker est√© listo...');\r\n            registration = await navigator.serviceWorker.ready;\r\n\r\n            setMessage('4/5: Obteniendo claves VAPID...');\r\n\r\n            // Llaves p√∫blicas de nuestro .env embebidas por Next.js\r\n            const publicVapidKey = process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY;\r\n\r\n            if (!publicVapidKey) {\r\n                const errMsg = 'Error: NEXT_PUBLIC_VAPID_PUBLIC_KEY no est√° definida. Si la a√±adiste a Railway, debes re-desplegar la aplicaci√≥n.';\r\n                setMessage(errMsg);\r\n                alert(errMsg);\r\n                setIsSubscribing(false);\r\n                return;\r\n            }\r\n\r\n            setMessage('5/6: Generando suscripci√≥n Push...');\r\n            const sub = await registration.pushManager.subscribe({\r\n                userVisibleOnly: true,\r\n                applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\r\n            });\r\n\r\n            // Parsear para enviar a Prisma\r\n            const subStr = JSON.stringify(sub);\r\n            const subObj = JSON.parse(subStr);\r\n\r\n            setMessage('6/6: Guardando en la base de datos...');\r\n            const result = await savePushSubscription(subObj);\r\n\r\n            if (result.success) {\r\n                setSubscription(sub);\r\n                setMessage('¬°Notificaciones Activadas!');\r\n                alert('¬°Suscripci√≥n exitosa!');\r\n                setTimeout(() => setMessage(''), 3000);\r\n            } else {\r\n                setMessage(`Error en BD: ${result.error}`);\r\n                alert(`Error guardando en BD: ${result.error}`);\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('Error in subscribeToPush:', error);\r\n            setMessage(`Denegado / Error: ${error.message}`);\r\n            alert(`Error al suscribir: ${error.message}`);\r\n        }\r\n        setIsSubscribing(false);\r\n    };\r\n\r\n    if (!isSupported) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div style={{ padding: '1rem', borderTop: '1px solid var(--border-color)', marginTop: 'auto' }}>\r\n            {subscription ? (\r\n                <div style={{ fontSize: '0.8rem', color: 'var(--status-ready)' }}>\r\n                    ‚úÖ Notificaciones Activadas\r\n                </div>\r\n            ) : (\r\n                <button\r\n                    onClick={subscribeToPush}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '0.5rem',\r\n                        backgroundColor: 'var(--primary)',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: 'var(--radius-sm)',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        fontSize: '0.85rem'\r\n                    }}\r\n                >\r\n                    Activar Alertas (Push)\r\n                </button>\r\n            )}\r\n            {message && <div style={{ fontSize: '0.75rem', color: 'gray', marginTop: '0.5rem' }}>{message}</div>}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Utility para transformar Base64 VAPID\r\nfunction urlBase64ToUint8Array(base64String: string) {\r\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n    const base64 = (base64String + padding)\r\n        .replace(/\\-/g, '+')\r\n        .replace(/_/g, '/');\r\n\r\n    const rawData = window.atob(base64);\r\n    const outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) {\r\n        outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n}\r\n","__turbopack_context__.v({\n  \"chatHeader\": \"FloatingChatbot-module__ZJnDPa__chatHeader\",\n  \"chatWindow\": \"FloatingChatbot-module__ZJnDPa__chatWindow\",\n  \"chatbotWrapper\": \"FloatingChatbot-module__ZJnDPa__chatbotWrapper\",\n  \"closeBtn\": \"FloatingChatbot-module__ZJnDPa__closeBtn\",\n  \"fabBtn\": \"FloatingChatbot-module__ZJnDPa__fabBtn\",\n  \"input\": \"FloatingChatbot-module__ZJnDPa__input\",\n  \"inputArea\": \"FloatingChatbot-module__ZJnDPa__inputArea\",\n  \"messagesArea\": \"FloatingChatbot-module__ZJnDPa__messagesArea\",\n  \"msgAi\": \"FloatingChatbot-module__ZJnDPa__msgAi\",\n  \"msgUser\": \"FloatingChatbot-module__ZJnDPa__msgUser\",\n  \"sendBtn\": \"FloatingChatbot-module__ZJnDPa__sendBtn\",\n});\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport styles from './FloatingChatbot.module.css';\r\n\r\n// Using pathname to infer context if applicable\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { getOrCreateChatSession, getChatHistory, clearChatHistory } from '@/app/actions/chat';\r\n\r\nexport default function FloatingChatbot() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [messages, setMessages] = useState<{ role: 'user' | 'model', text: string }[]>([]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [sessionId, setSessionId] = useState<string | null>(null);\r\n    const pathname = usePathname();\r\n    const router = useRouter();\r\n\r\n    // No mostrar el chatbot en Login/Register\r\n    if (pathname === '/login' || pathname === '/register') {\r\n        return null;\r\n    }\r\n\r\n    // Determine workspaceId based on current url\r\n    const workspaceId = pathname && pathname.includes('/workspace/') ? pathname.split('/').pop() || null : null;\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        const loadHistory = async () => {\r\n            try {\r\n                const session = await getOrCreateChatSession(workspaceId);\r\n                if (!isMounted) return;\r\n                setSessionId(session.id);\r\n\r\n                const history = await getChatHistory(session.id);\r\n                if (!isMounted) return;\r\n\r\n                if (history && history.length > 0) {\r\n                    setMessages(history.map((msg: any) => ({ role: msg.role as 'user' | 'model', text: msg.text })));\r\n                } else {\r\n                    // Start with basic greeting\r\n                    setMessages([{ role: 'model', text: '¬°Hola! Soy tu asistente de NextTask impulsado por Gemini. ¬øEn qu√© puedo ayudarte a organizar tu d√≠a?' }]);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to load chat history\", error);\r\n                if (isMounted) {\r\n                    setMessages([{ role: 'model', text: '¬°Hola! Soy tu asistente de NextTask impulsado por Gemini. ¬øEn qu√© puedo ayudarte a organizar tu d√≠a?' }]);\r\n                }\r\n            }\r\n        };\r\n\r\n        loadHistory();\r\n\r\n        return () => {\r\n            isMounted = false;\r\n        };\r\n    }, [workspaceId]);\r\n\r\n    const handleSend = async () => {\r\n        if (!input.trim()) return;\r\n\r\n        const userMsg = input.trim();\r\n        const newMessages = [...messages, { role: 'user' as const, text: userMsg }];\r\n        setMessages(newMessages);\r\n        setInput('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            // Determine context from URL roughly\r\n            let context: any = null;\r\n            if (workspaceId) {\r\n                context = { workspaceId, workspaceName: \"Workspace Actual\" };\r\n            }\r\n\r\n            // Usamos el historial completo para enviar a la API\r\n            const chatHistory = newMessages.map(m => ({\r\n                role: m.role,\r\n                parts: [{ text: m.text }]\r\n            }));\r\n\r\n            const res = await fetch('/api/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ messages: chatHistory, context, sessionId })\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (data.reply) {\r\n                setMessages(prev => [...prev, { role: 'model', text: data.reply }]);\r\n                if (data.refreshRequired) {\r\n                    router.refresh(); // Refresh the page to show new data\r\n                }\r\n            } else {\r\n                setMessages(prev => [...prev, { role: 'model', text: \"Lo siento, tuve un problema al procesar eso.\" }]);\r\n            }\r\n        } catch (error) {\r\n            setMessages(prev => [...prev, { role: 'model', text: \"Error de conexi√≥n temporal.\" }]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleClear = async () => {\r\n        if (!sessionId) return;\r\n        setIsLoading(true);\r\n        try {\r\n            await clearChatHistory(sessionId);\r\n            setMessages([{ role: 'model', text: '¬°Hola! He limpiado nuestra conversaci√≥n. ¬øEn qu√© puedo ayudarte a organizar tu d√≠a?' }]);\r\n        } catch (e) {\r\n            console.error(\"No se pudo limpiar el chat\", e);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // No mostrar el chatbot en Login/Register\r\n    if (pathname === '/login' || pathname === '/register') {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={styles.chatbotWrapper}>\r\n            {isOpen && (\r\n                <div className={styles.chatWindow}>\r\n                    <div className={styles.chatHeader}>\r\n                        <span style={{ fontWeight: 600 }}>‚ú® Gemini AI</span>\r\n                        <div style={{ display: 'flex', gap: '8px' }}>\r\n                            <button onClick={handleClear} title=\"Limpiar Conversaci√≥n\" className={styles.iconBtn}>\r\n                                üóëÔ∏è\r\n                            </button>\r\n                            <button onClick={() => setIsOpen(false)} className={styles.closeBtn}>√ó</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={styles.messagesArea}>\r\n                        {messages.map((msg, i) => (\r\n                            <div key={i} className={msg.role === 'model' ? styles.msgAi : styles.msgUser}>\r\n                                {msg.text}\r\n                            </div>\r\n                        ))}\r\n                        {isLoading && <div className={styles.msgAi}>Pensando...</div>}\r\n                    </div>\r\n\r\n                    <div className={styles.inputArea}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Preg√∫ntale a Gemini...\"\r\n                            value={input}\r\n                            onChange={e => setInput(e.target.value)}\r\n                            onKeyDown={e => e.key === 'Enter' && handleSend()}\r\n                            className={styles.input}\r\n                        />\r\n                        <button onClick={handleSend} disabled={isLoading} className={styles.sendBtn}>\r\n                            {isLoading ? '...' : '‚û§'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {!isOpen && (\r\n                <button className={styles.fabBtn} onClick={() => setIsOpen(true)}>\r\n                    ‚ú® Asistente IA\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3\":\"getOrCreateChatSession\"},\"src/app/actions/chat.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"40f7eb3235ad61d3222f3a251f463480ee8dcc84e3\",callServer,void 0,findSourceMapURL,\"getOrCreateChatSession\");export{$$RSC_SERVER_ACTION_0 as getOrCreateChatSession};","/* __next_internal_action_entry_do_not_use__ [{\"40723cc56224262f28b87c25b6b494ea62369a007e\":\"getChatHistory\"},\"src/app/actions/chat.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40723cc56224262f28b87c25b6b494ea62369a007e\",callServer,void 0,findSourceMapURL,\"getChatHistory\");export{$$RSC_SERVER_ACTION_1 as getChatHistory};","/* __next_internal_action_entry_do_not_use__ [{\"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30\":\"clearChatHistory\"},\"src/app/actions/chat.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"40897aa8b4c0ae0f8aadab3d0c9582d0f8de82be30\",callServer,void 0,findSourceMapURL,\"clearChatHistory\");export{$$RSC_SERVER_ACTION_3 as clearChatHistory};","'use client';\r\n\r\nimport { SessionProvider } from 'next-auth/react';\r\n\r\nexport default function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    return <SessionProvider>{children}</SessionProvider>;\r\n}\r\n"],"names":[],"mappings":"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"}